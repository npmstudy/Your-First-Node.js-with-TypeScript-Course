<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>å¼€æºæœ€ä½³å®è·µ</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../preface.html">å‰è¨€</a></li><li class="chapter-item expanded "><a href="../1/1.html"><strong aria-hidden="true">1.</strong> Hello Node.js v20</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../1/1.1.html"><strong aria-hidden="true">1.1.</strong> Node.js v20</a></li><li class="chapter-item expanded "><a href="../1/1.2.html"><strong aria-hidden="true">1.2.</strong> Node.jså®‰è£…</a></li><li class="chapter-item expanded "><a href="../1/1.3.html"><strong aria-hidden="true">1.3.</strong> Node.jsæ¨¡å—</a></li><li class="chapter-item expanded "><a href="../1/1.4.html"><strong aria-hidden="true">1.4.</strong> ç¬¬ä¸€ä¸ªNode.js v20é¡¹ç›®</a></li><li class="chapter-item expanded "><a href="../1/1.5.html"><strong aria-hidden="true">1.5.</strong> æœ¬ç« å°ç»“</a></li></ol></li><li class="chapter-item expanded "><a href="../2/2.html"><strong aria-hidden="true">2.</strong> Hello TypeScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../2/2.1.html"><strong aria-hidden="true">2.1.</strong> TypeScriptæ˜¯ä»€ä¹ˆ</a></li><li class="chapter-item expanded "><a href="../2/2.2.html"><strong aria-hidden="true">2.2.</strong> TypeScriptå®‰è£…</a></li><li class="chapter-item expanded "><a href="../2/2.3.html"><strong aria-hidden="true">2.3.</strong> TypeScriptåŸºç¡€</a></li><li class="chapter-item expanded "><a href="../2/2.4.html"><strong aria-hidden="true">2.4.</strong> TypeScriptè¿›é˜¶</a></li><li class="chapter-item expanded "><a href="../2/2.5.html"><strong aria-hidden="true">2.5.</strong> æœ¬ç« å°ç»“</a></li></ol></li><li class="chapter-item expanded "><a href="../3/3.html"><strong aria-hidden="true">3.</strong> ä½ çš„ç¬¬ä¸€ä¸ªTSç¼–å†™çš„Node.jsé¡¹ç›®</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../3/3.1.html"><strong aria-hidden="true">3.1.</strong> é¡¹ç›®å®æˆ˜</a></li><li class="chapter-item expanded "><a href="../3/3.2.html"><strong aria-hidden="true">3.2.</strong> Tsxç¼–è¯‘</a></li><li class="chapter-item expanded "><a href="../3/3.3.html"><strong aria-hidden="true">3.3.</strong> TSDocæ–‡æ¡£</a></li><li class="chapter-item expanded "><a href="../3/3.4.html"><strong aria-hidden="true">3.4.</strong> Tsupå‘å¸ƒ</a></li><li class="chapter-item expanded "><a href="../3/3.5.html"><strong aria-hidden="true">3.5.</strong> æœ¬ç« å°ç»“</a></li></ol></li><li class="chapter-item expanded "><a href="../4/4.html"><strong aria-hidden="true">4.</strong> ç”¨VSCodeè°ƒè¯•é¡¹ç›®</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../4/4.1.html"><strong aria-hidden="true">4.1.</strong> VSCode+Cursorå¿…æ€æŠ€</a></li><li class="chapter-item expanded "><a href="../4/4.2.html"><strong aria-hidden="true">4.2.</strong> Node.jsè°ƒè¯•</a></li><li class="chapter-item expanded "><a href="../4/4.3.html"><strong aria-hidden="true">4.3.</strong> TS+Node.jsè°ƒè¯•</a></li><li class="chapter-item expanded "><a href="../4/4.4.html"><strong aria-hidden="true">4.4.</strong> æœ¬ç« å°ç»“</a></li></ol></li><li class="chapter-item expanded "><a href="../5/5.html"><strong aria-hidden="true">5.</strong> ç»™Node.jsé¡¹ç›®å¢åŠ TSæµ‹è¯•</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../5/5.1.html"><strong aria-hidden="true">5.1.</strong> å¢åŠ TSæµ‹è¯•</a></li><li class="chapter-item expanded "><a href="../5/5.2.html"><strong aria-hidden="true">5.2.</strong> å¸¸ç”¨æµ‹è¯•æŠ€å·§è¿›é˜¶</a></li><li class="chapter-item expanded "><a href="../5/5.3.html"><strong aria-hidden="true">5.3.</strong> å­¦ä¼šCI/CD</a></li><li class="chapter-item expanded "><a href="../5/5.4.html"><strong aria-hidden="true">5.4.</strong> æœ¬ç« å°ç»“</a></li></ol></li><li class="chapter-item expanded "><a href="../6/6.html"><strong aria-hidden="true">6.</strong> Menorepoå¤šæ¨¡å—å¼€å‘å®è·µ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../6/6.1.html"><strong aria-hidden="true">6.1.</strong> å¼€å‘ä½ çš„ç¬¬ä¸€ä¸ªæ¨¡å—</a></li><li class="chapter-item expanded "><a href="../6/6.2.html" class="active"><strong aria-hidden="true">6.2.</strong> å¼€æºæœ€ä½³å®è·µ</a></li><li class="chapter-item expanded "><a href="../6/6.3.html"><strong aria-hidden="true">6.3.</strong> å¦‚ä½•å­¦ä¹ </a></li><li class="chapter-item expanded "><a href="../6/6.4.html"><strong aria-hidden="true">6.4.</strong> æœ¬ç« å°ç»“</a></li></ol></li><li class="chapter-item expanded "><a href="../7/7.html"><strong aria-hidden="true">7.</strong> ä½¿ç”¨HonoåšWebå¼€å‘</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../7/7.1.html"><strong aria-hidden="true">7.1.</strong> Honoæ¡†æ¶</a></li><li class="chapter-item expanded "><a href="../7/7.2.html"><strong aria-hidden="true">7.2.</strong> ä½¿ç”¨ORpc + ScalaråšAPIå¼€å‘</a></li><li class="chapter-item expanded "><a href="../7/7.3.html"><strong aria-hidden="true">7.3.</strong> ä½¿ç”¨Cellaå¼€å‘Webåº”ç”¨</a></li><li class="chapter-item expanded "><a href="../7/7.4.html"><strong aria-hidden="true">7.4.</strong> ç›‘æ§Apitally</a></li><li class="chapter-item expanded "><a href="../7/7.5.html"><strong aria-hidden="true">7.5.</strong> æœ¬ç« å°ç»“</a></li></ol></li><li class="chapter-item expanded "><a href="../appendix.html"><strong aria-hidden="true">8.</strong> é™„å½•</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/skyzh/mini-lsm" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="å¼€æºæœ€ä½³å®è·µ"><a class="header" href="#å¼€æºæœ€ä½³å®è·µ">å¼€æºæœ€ä½³å®è·µ</a></h1>
<p>åœ¨ https://github.com/npmstudy/your-node-v20-menoreopo-project é‡Œï¼Œæˆ‘ä»¬ç”¨åˆ°çš„æŠ€æœ¯æ ˆå¦‚ä¸‹ã€‚</p>
<pre><code class="language-markdown">- [Tsup](https://tsup.egoist.dev/) as a TypeScript universal package.
- [Tsx](https://github.com/esbuild-kit/tsx) as a Node.js enhanced with esbuild to run TypeScript &amp; ESM
- [Tsd](https://github.com/SamVerschueren/tsd) as type test runner
- [Tsdoc](https://tsdoc.org/) as document
- [PNPM](https://pnpm.io/workspaces) as workspace manager and package manager.
- [Vitest](https://vitest.dev/) as a test runner.
- [Size Limit](https://github.com/ai/size-limit) as a size limit plugin.
- [Prettier](https://prettier.io/) as a code formatter.
- [ESLint](https://eslint.org/) as a code linter.
- [NX](https://nx.dev) as cacheable operations.
- [Changesets](https://github.com/changesets/changesets/) as a way to manage changes and releases.
- [c8](https://www.npmjs.com/package/c8) as coverage
- [supertest](https://www.npmjs.com/package/supertest) as server test
- [cypress](https://www.cypress.io/) as e2e test
</code></pre>
<p>è¿è¡ŒTSçš„4ä¸ªï¼ˆå·²è®²è¿‡ï¼‰</p>
<ol>
<li>tsup</li>
<li>tsx</li>
<li>tsd</li>
<li>tsdoc</li>
</ol>
<p>æ¨¡å—å®‰è£…å’Œmenorepo</p>
<ol>
<li>pnpm</li>
</ol>
<p>æµ‹è¯•</p>
<ol>
<li>Vitest</li>
<li>c8ï¼ˆå·²è®²è¿‡ï¼‰</li>
<li>supertest</li>
<li>cypress</li>
</ol>
<p>å…¶ä»–</p>
<ol>
<li>Size-limit</li>
<li>NX</li>
<li>ESLint</li>
<li>Prettier</li>
<li>Changesets</li>
</ol>
<p>å…¶ä¸­ESLintå’ŒPrettierå‰ç«¯åŒå­¦éƒ½ç†Ÿæ‚‰ï¼Œè¿™é‡Œå°±ç»†è®²äº†ã€‚</p>
<ul>
<li>ESLintæ˜¯ä¸€ä¸ªç”¨äºJavaScriptå’ŒJSXä»£ç çš„é™æ€ä»£ç åˆ†æå·¥å…·ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨ç¼–å†™ä»£ç çš„è¿‡ç¨‹ä¸­å‘ç°å¹¶ä¿®å¤æ½œåœ¨çš„é—®é¢˜ï¼Œä»¥ç¡®ä¿ä»£ç çš„è´¨é‡å’Œä¸€è‡´æ€§ã€‚</li>
<li>Prettieræ˜¯ä¸€ä¸ªä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œç”¨äºè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ä»¥ä¿æŒä¸€è‡´çš„ä»£ç é£æ ¼ã€‚å®ƒæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬JavaScriptã€CSSã€HTMLã€JSONç­‰ã€‚Prettierå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿã€å‡†ç¡®åœ°æ ¼å¼åŒ–ä»£ç ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å®ƒå¯ä»¥ä¸å…¶ä»–ä»£ç æ£€æŸ¥å·¥å…·ï¼ˆå¦‚ESLintï¼‰é…åˆä½¿ç”¨ï¼Œä»¥ç¡®ä¿ä»£ç çš„è´¨é‡å’Œä¸€è‡´æ€§ã€‚</li>
</ul>
<p>å®ƒä¿©æ˜¯VSCodeéå¸¸å¸¸è§çš„æ­æ¡£ã€‚</p>
<h2 id="pnpm"><a class="header" href="#pnpm">Pnpm</a></h2>
<p>åŒ…ç®¡ç†æ¼”è¿›å†å²ï¼Œå‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/582229306">https://zhuanlan.zhihu.com/p/582229306</a>ï¼Œå„ä¸ªåŒ…ç®¡ç†å™¨å¯¹æ¯”å¦‚ä¸‹ã€‚</p>
<p>pnpmåœ¨2018å¹´å‘å¸ƒï¼Œä½œä¸ºnpmçš„æ›´å¿«é€Ÿå’Œæ›´é«˜æ•ˆçš„æ›¿ä»£å“ã€‚</p>
<p><img src="img/Untitled%202.png" alt="Untitled" /></p>
<p>é€‰æ‹©pnpmçš„åŸå› ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å®‰è£…é€Ÿåº¦å¿«ï¼Œå‚è€ƒå®˜æ–¹çš„<a href="https://pnpm.io/benchmarks">https://pnpm.io/benchmarks</a>åŸºå‡†æµ‹è¯•æ•°æ®ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th>è¡Œä¸º</th><th>ç¼“å­˜</th><th>lockfile</th><th>node_modules</th><th>npm</th><th><strong>pnpm</strong></th><th>Yarn</th><th>Yarn PnP</th></tr></thead><tbody>
<tr><td>install</td><td></td><td></td><td></td><td>34.3s</td><td>13.2s</td><td>22.1s</td><td>20.2s</td></tr>
<tr><td>install</td><td>âœ”</td><td>âœ”</td><td>âœ”</td><td>2.5s</td><td>1.6s</td><td>695ms</td><td>n/a</td></tr>
<tr><td>install</td><td>âœ”</td><td>âœ”</td><td></td><td>9.5s</td><td>4.8s</td><td>8.8s</td><td>668ms</td></tr>
<tr><td>install</td><td>âœ”</td><td></td><td></td><td>15.5s</td><td>9.3s</td><td>22.8s</td><td>15.2s</td></tr>
<tr><td>install</td><td></td><td>âœ”</td><td></td><td>19.3s</td><td>9.8s</td><td>8.9s</td><td>670ms</td></tr>
<tr><td>install</td><td>âœ”</td><td></td><td>âœ”</td><td>2.8s</td><td>3.4s</td><td>16s</td><td>n/a</td></tr>
<tr><td>install</td><td></td><td>âœ”</td><td>âœ”</td><td>2.5s</td><td>1.7s</td><td>681ms</td><td>n/a</td></tr>
<tr><td>install</td><td></td><td></td><td>âœ”</td><td>2.8s</td><td>8.8s</td><td>16.6s</td><td>n/a</td></tr>
<tr><td>update</td><td>n/a</td><td>n/a</td><td>n/a</td><td>9.2s</td><td>5.8s</td><td>8.7s</td><td>16.9s</td></tr>
</tbody></table>
</div>
<p>è¿˜æœ‰ä¸€äº›å…¶ä»–ç‰¹æ€§</p>
<p><img src="img/Untitled%203.png" alt="Untitled" /></p>
<p>pnpmä½¿ç”¨çš„æ˜¯npm version 2.xç±»ä¼¼çš„æ ‘å½¢ç»“æ„ï¼ŒåŒæ—¶ä½¿ç”¨.pnpm ä»¥å¹³é“ºçš„å½¢å¼å‚¨å­˜ç€æ‰€æœ‰çš„åŒ…ã€‚è¿™é‡Œçš„.pnmpä¸ºè™šæ‹Ÿå­˜å‚¨ç›®å½•ï¼Œè¯¥ç›®å½•é€šè¿‡<code>&lt;package-name&gt;@&lt;version&gt;</code>æ¥å®ç°ç›¸åŒæ¨¡å—ä¸åŒç‰ˆæœ¬ä¹‹é—´éš”ç¦»å’Œå¤ç”¨ï¼Œç”±äºå®ƒåªä¼šæ ¹æ®é¡¹ç›®ä¸­çš„ä¾èµ–ç”Ÿæˆï¼Œå¹¶ä¸å­˜åœ¨æå‡ï¼Œæ‰€ä»¥å®ƒä¸ä¼šå­˜åœ¨ä¹‹å‰æåˆ°çš„<strong>Phantom dependencies</strong>é—®é¢˜ï¼</p>
<p>ç„¶åä½¿ç”¨Store + Linkså’Œæ–‡ä»¶èµ„æºè¿›è¡Œå…³è”ã€‚ç®€å•è¯´pnpmæŠŠä¼šåŒ…ä¸‹è½½åˆ°ä¸€ä¸ªå…¬å…±ç›®å½•ï¼Œå¦‚æœæŸä¸ªä¾èµ–åœ¨ sotre ç›®å½•ä¸­å­˜åœ¨äº†è¯ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥ä» store ç›®å½•é‡Œé¢å» hard-linkï¼Œé¿å…äº†äºŒæ¬¡å®‰è£…å¸¦æ¥çš„æ—¶é—´æ¶ˆè€—ï¼Œå¦‚æœä¾èµ–åœ¨ store ç›®å½•é‡Œé¢ä¸å­˜åœ¨çš„è¯ï¼Œå°±ä¼šå»ä¸‹è½½ä¸€æ¬¡ã€‚</p>
<p>é€šè¿‡Store + hard linkçš„æ–¹å¼ï¼Œä¸ä»…è§£å†³äº†é¡¹ç›®ä¸­çš„NPM doppelgangersé—®é¢˜ï¼Œé¡¹ç›®ä¹‹é—´ä¹Ÿä¸å­˜åœ¨è¯¥é—®é¢˜ï¼Œä»è€Œå®Œç¾è§£å†³äº†npm3+å’Œyarnä¸­çš„åŒ…é‡å¤é—®é¢˜ï¼</p>
<p><img src="img/Untitled%204.png" alt="Untitled" /></p>
<p>pnpmé™¤äº†å®‰è£…é€Ÿåº¦å¿«ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´ï¼Œé¿å…å¹½çµä¾èµ–ç­‰ä¼˜åŒ–ï¼Œä¹Ÿå†…ç½®äº†å¯¹monorepoçš„æ”¯æŒã€‚ä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»ºpnpm-workspace.yamlæ–‡ä»¶ï¼Œå¹¶å£°æ˜å¯¹åº”çš„å·¥ä½œåŒºå°±å¥½ã€‚</p>
<pre><code class="language-tsx">$ cat pnpm-workspace.yaml
packages:
  - 'example'
  - 'packages/*'

</code></pre>
<p>å‰©ä¸‹çš„å°±æ˜¯è¿è¡Œæ—¶å¤„ç†ã€‚ä¹‹å‰nx run-manyè§£å†³äº†menorepoå­æ¨¡å—è¿è¡Œçš„é—®é¢˜ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨æ ¹ç›®å½•æ‰§è¡ŒæŸä¸ªé¡¹ç›® çš„æ„å»ºè„šæœ¬ï¼Œéœ€è¦é€šè¿‡â€”filteræˆ–-Fè¿‡æ»¤ä¹‹åï¼Œå†æ‰§è¡Œï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<pre><code class="language-tsx">$ pnpm -F example dev
</code></pre>
<p>ä»¥ä¸Šéƒ½æ˜¯pnpmçš„æœ‰ç‚¹ï¼Œå…¶å®pnpmçš„æ¼”è¿›è¿˜æ˜¯æ¯”è¾ƒå¿«çš„ï¼Œæ¯”å¦‚pnpm v7å’Œpnpm v8ç‰ˆæœ¬å·®å¼‚è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œä¸”ä¸å®Œå…¨å…¼å®¹ã€‚ä½†æ•´ä¸ªç¤¾åŒºæ˜¯æ¯”è¾ƒæ´»è·ƒçš„ï¼Œ</p>
<aside>
ğŸ’¡ éƒ½è¯´Node.jså’Œå‰ç«¯å¤æ‚ï¼Œå…¶å®æ˜¯èƒŒåå·¥ç¨‹å¤æ‚åº¦å¯¼è‡´çš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¹ˆå¤šä¾èµ–ï¼Œè¿™ä¹ˆå¤šç‰ˆæœ¬ï¼Œä¹Ÿä¸ä¼šå‡ºç°å¹»å½±ä¾èµ–è¿™æ ·çš„é—®é¢˜ã€‚å…¶å®ï¼Œå¯¹ç”¨çš„äººæ¥è¯´æ— æ„Ÿçš„ï¼Œæˆ‘å°±ç”¨pnpm v8ï¼Œåƒå…¶ä»–ç¤¾åŒºä¸€æ ·ï¼Œä¹Ÿæ²¡é—®é¢˜çš„ã€‚çœŸæ­£çš„é—®é¢˜æ˜¯Node.jså’Œå‰ç«¯å˜åŒ–å¤ªå¿«ï¼Œä½ åœ¨è¾ƒçŸ­æ—¶é—´å†…ï¼Œæ€»å¯èƒ½ä¼šé‡åˆ°pnpm v7çš„ä»£ç ï¼Œç”šè‡³äº’ç›¸åˆ‡æ¢ã€‚
</aside>
<h2 id="vitest"><a class="header" href="#vitest">Vitest</a></h2>
<ul>
<li>
<p><strong>A Vite-native unit test framework.</strong></p>
<p><strong>It's fast!</strong></p>
</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>åŸºäºviteæœºåˆ¶ï¼Œæ€§èƒ½æä½³ï¼Œæ¯”jestå¿«å¾ˆå¤šï¼Œ</li>
<li>å¯¹esmæ”¯æŒæå¥½</li>
<li>å…¼å®¹jest api</li>
<li>å¾ˆå¤šæŠ€æœ¯é€‰å‹ä¹Ÿéƒ½æ˜¯éå¸¸æ£’ï¼Œæ¯”å¦‚tinypoolï¼Œéƒ½æ˜¯å¾ˆç»å…¸çš„ã€‚</li>
</ol>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä»è¯·æ±‚å¼€å§‹æ¥æµ‹è¯•nodeæœåŠ¡æ¥å£è¿”å›çš„æ•°æ®æ˜¯å¦æ­£å¸¸ï¼Œä¹Ÿå°±æ˜¯è¯´è¿›è¡Œä¸€ä¸ªæ•´ä½“æ€§æµ‹è¯•ï¼Œé‚£ä¹ˆ superTest å°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚superTestå¯ä»¥å¸®åŠ©æˆ‘ä»¬å»è¯·æ±‚æœ¬åœ° koa æˆ–è€… expressè¿™ç±»webæ¡†æ¶æ‰€ç¼–å†™çš„è·¯ç”±æ¥å£ï¼Œè€Œä¸”å¯¹æ¥å£è¿”å›çš„çŠ¶æ€ç ã€æ•°æ®ç­‰è¿›è¡Œæ–­è¨€æ ¡éªŒã€‚</p>
<p>å®ƒæœ¬èº«ä¸ä¾èµ–ä»»ä½•æµ‹è¯•æ¡†æ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå®ƒä¸¢åˆ°mochaçš„æµ‹è¯•ç”¨ä¾‹ä¸­æ‰§è¡Œï¼š</p>
<p>å…ˆå†™ä¸€ä¸ªç®€å•çš„Koaçš„Hello worldã€‚è§app.js</p>
<pre><code class="language-tsx">import Koa from &quot;koa&quot;;
const app = new Koa();

// response
app.use((ctx) =&gt; {
  ctx.body = &quot;Hello Koa&quot;;
});

export default app;
</code></pre>
<p>å†å†™ä¸€ä¸ªæµ‹è¯•è„šæœ¬ï¼Œrun.js</p>
<pre><code class="language-tsx">import app from &quot;./index.js&quot;;

app.listen(3000);
</code></pre>
<p>æ­¤æ—¶ï¼Œæ‰§è¡Œnode run.jså°±å¯ä»¥å¯åŠ¨æœåŠ¡äº†ã€‚ç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•å¦‚ä½•ç¼–å†™ã€‚</p>
<pre><code class="language-tsx">import { expect, test } from &quot;vitest&quot;;
import supertest from &quot;supertest&quot;;
import app from &quot;./index.js&quot;;

test(&quot;koa app&quot;, async () =&gt; {
  const res = await supertest(app.callback()).get(&quot;/&quot;);

  expect(res.type).toEqual(&quot;text/plain&quot;);
  expect(res.status).toEqual(200);
  expect(res.text).toEqual(&quot;Hello Koa&quot;);
});
</code></pre>
<p>è¿™ä¸ªä»£ç å’Œæˆ‘ä»¬åœ¨Node.js v20çš„test runneré‡Œå‡ ä¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é€šè¿‡ä¸‹é¢å‘½ä»¤å³å¯è¿è¡Œæµ‹è¯•ã€‚</p>
<pre><code class="language-tsx">$ npx vitest run

 RUN  v0.34.6 /Users/alfred/workspace/npmstudy/vitest-with-supertest

 âœ“ index.test.js (1)
   âœ“ koa app

 Test Files  1 passed (1)
      Tests  1 passed (1)
   Start at  11:56:53
   Duration  232ms (transform 17ms, setup 0ms, collect 69ms, tests 8ms, environment 0ms, prepare 44ms)
</code></pre>
<p>è¯´æ˜ã€‚</p>
<ul>
<li>vitestä¸å¸¦runå‚æ•°ï¼Œæ˜¯watchè¿è¡Œæ¨¡å¼ï¼Œå’Œjestç±»ä¼¼</li>
<li>vitestå¸¦runå‚æ•°ï¼Œæ˜¯å•æ¬¡è¿è¡Œæ¨¡å¼</li>
</ul>
<h2 id="cypress"><a class="header" href="#cypress">Cypress</a></h2>
<p>å®‰è£…</p>
<pre><code class="language-tsx">$ npm install cypress --save-dev --registry=https://registry.npmmirror.com
</code></pre>
<p>é€šè¿‡npx cypress openæ‰“å¼€ã€‚</p>
<pre><code class="language-tsx">$ npx cypress open
It looks like this is your first time using Cypress: 13.3.0

âœ”  Verified Cypress! /Users/alfred/Library/Caches/Cypress/13.3.0/Cypress.app

Opening Cypress...

DevTools listening on ws://127.0.0.1:54097/devtools/browser/dc560ea2-0aad-47a4-9461-1e160b19a5a3
</code></pre>
<p><img src="img/Untitled%205.png" alt="Untitled" /></p>
<p><img src="img/Untitled%206.png" alt="Untitled" /></p>
<p><img src="img/Untitled%207.png" alt="Untitled" /></p>
<p><img src="img/Untitled%208.png" alt="Untitled" /></p>
<p>ä¿®æ”¹ä»£ç ï¼Œæ‰‹åŠ¨æ‰§è¡Œnode run.jså¯åŠ¨æœåŠ¡ã€‚</p>
<pre><code class="language-tsx">describe(&quot;template spec&quot;, () =&gt; {
  it(&quot;passes&quot;, () =&gt; {
    cy.visit(&quot;http://127.0.0.1:3000&quot;);
    cy.contains(&quot;Hello Koa&quot;);
  });
});
</code></pre>
<p><img src="img/Untitled%209.png" alt="Untitled" /></p>
<p>ä¸ºäº†ç®€åŒ–æ“ä½œï¼Œæˆ‘ä»¬æŠŠå¯åŠ¨æœåŠ¡æ”¾åˆ°cypress.config.jsé‡Œã€‚</p>
<pre><code class="language-tsx">import { defineConfig } from &quot;cypress&quot;;
import app from &quot;./index.js&quot;;
export default defineConfig({
  e2e: {
    setupNodeEvents(on, config) {
      // implement node event listeners here
      on(&quot;before:run&quot;, async (details) =&gt; {
        /* ... */
        await app.listen(3000);
      });
    },
  },
});
</code></pre>
<p>æ­¤æ—¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ã€‚</p>
<pre><code class="language-tsx">$ npx cypress run

DevTools listening on ws://127.0.0.1:61755/devtools/browser/0a2f2716-10cb-49b9-a2c9-5163469574e9

====================================================================================================

  (Run Starting)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Cypress:        13.3.0                                                                         â”‚
  â”‚ Browser:        Electron 114 (headless)                                                        â”‚
  â”‚ Node Version:   v20.6.1 (/Users/alfred/.nvm/versions/node/v20.6.1/bin/node)                    â”‚
  â”‚ Specs:          1 found (spec.cy.js)                                                           â”‚
  â”‚ Searched:       cypress/e2e/**/*.cy.{js,jsx,ts,tsx}                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Running:  spec.cy.js                                                                      (1 of 1)

  template spec
    âœ“ passes (27ms)

  1 passing (47ms)

  (Results)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Tests:        1                                                                                â”‚
  â”‚ Passing:      1                                                                                â”‚
  â”‚ Failing:      0                                                                                â”‚
  â”‚ Pending:      0                                                                                â”‚
  â”‚ Skipped:      0                                                                                â”‚
  â”‚ Screenshots:  0                                                                                â”‚
  â”‚ Video:        false                                                                            â”‚
  â”‚ Duration:     0 seconds                                                                        â”‚
  â”‚ Spec Ran:     spec.cy.js                                                                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

====================================================================================================

  (Run Finished)

       Spec                                              Tests  Passing  Failing  Pending  Skipped
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ”  spec.cy.js                                42ms        1        1        -        -        - â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    âœ”  All specs passed!                         42ms        1        1        -        -        -
</code></pre>
<p>Cypresså†™e2eæµ‹è¯•è¿˜æ˜¯éå¸¸ç®€å•çš„ï¼Œå®ƒä¹Ÿæ”¯æŒæµ‹è¯•è¦†ç›–ç‡ï¼Œä¹Ÿå¯ä»¥ç”Ÿäº§reporterï¼Œå’Œæˆ‘ä»¬åœ¨ä¸Šä¸€ç« èŠ‚å­¦åˆ°çš„c8ç±»ä¼¼ï¼Œå¤§å®¶å¦‚æœæ„Ÿå…´è¶£ä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸‹ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒCypressè¿˜æ”¯æŒç»„ä»¶çº§åˆ«æµ‹è¯•ï¼Œå¯ä»¥è¯´åˆæ˜¯å¡«è¡¥äº†ä¸€å—ç©ºç™½ï¼Œæ„ä¹‰éå‡¡ï¼Œå¯¹äºå¼€å‘ç»„ä»¶åº“æ¥è¯´ï¼Œä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„åŠŸèƒ½ã€‚</p>
<h2 id="size-limit"><a class="header" href="#size-limit">Size-limit</a></h2>
<p>size-limit æ˜¯ä¸€ä¸ªé˜²æ­¢ JavaScript åº“è†¨èƒ€çš„å·¥å…·ï¼Œç”¨äºæ§åˆ¶æ–‡ä»¶åŒ…çš„å¤§å°ã€‚å¦‚æœä¸å°å¿ƒæ·»åŠ äº†å¤§é‡çš„ä¾èµ–å…³ç³»ï¼Œsize-limit ä¼šå¼•å‘é”™è¯¯ã€‚</p>
<p>limit-size æ˜¯ä¸€ä¸ªç”¨äºæ§åˆ¶æ–‡ä»¶åŒ…å¤§å°çš„å·¥å…·ï¼Œå®ƒå¯ä»¥è¯»å–æ–‡ä»¶çš„å¤§å°ï¼Œå¹¶ä¸è®¾ç½®çš„æ–‡ä»¶å¤§å°è¿›è¡Œæ¯”è¾ƒã€‚</p>
<p><img src="img/Untitled%2010.png" alt="Untitled" /></p>
<p>ä½¿ç”¨GitHubæ“ä½œSize Limitå°†åœ¨æ‹‰å–è¯·æ±‚è®¨è®ºä¸­ä½œä¸ºè¯„è®ºå‘å¸ƒæ†ç»‘å¤§å°æ›´æ”¹ã€‚</p>
<p><img src="img/Untitled%2011.png" alt="Untitled" /></p>
<p>ä¹Ÿå¯ä»¥ç»“åˆhttps://github.com/statoscope/statoscope è¿›è¡Œåˆ†æã€‚</p>
<p>Â <a href="https://www.smashingmagazine.com/2022/02/statoscope-course-intensive-therapy-bundle/">Statoscope: A Course Of Intensive Therapy For Your Bundle</a>.</p>
<p><img src="img/Untitled%2012.png" alt="Untitled" /></p>
<h2 id="nx"><a class="header" href="#nx">Nx</a></h2>
<aside>
ğŸ’¡ Nrwl(å¼€æºæ„å»ºç³»ç»ŸNXèƒŒåçš„å…¬å¸)å·²ç»æ¥ç®¡äº†Lernaã€‚NXæ˜¯ä¸€ä¸ªç”±å‰è°·æ­Œå‘˜å·¥å¼€å‘çš„æ„å»ºç³»ç»Ÿï¼Œå®ƒåˆ©ç”¨äº†è°·æ­Œå†…éƒ¨å·¥å…·ä½¿ç”¨çš„è®¸å¤šæŠ€æœ¯ã€‚Lerna v5æ˜¯è¿™ç§æ–°ç®¡ç†æ–¹å¼ä¸‹çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå®ƒæ›´æ–°äº†è¿‡æ—¶çš„åŒ…ï¼Œå¹¶å¼€å§‹å¯¹å­˜å‚¨åº“æœ¬èº«è¿›è¡Œä¸€äº›æ¸…ç†ã€‚ä»V5.1+å¼€å§‹ï¼ŒLernaæä¾›äº†é›†æˆNXçš„æ–°å¯èƒ½æ€§ï¼Œå¹¶å°†è®¸å¤šä»»åŠ¡è°ƒåº¦å·¥ä½œæ¨è¿Ÿåˆ°NXã€‚
</aside>
<p>åœ¨ä½¿ç”¨Menorepoæ—¶ï¼Œä½ ä¸€å®šå¬è¯´è¿‡ Nxã€‚ç®€è€Œè¨€ä¹‹ï¼ŒNx å¯ä»¥åŠ å¿«å’Œç®€åŒ–ä¸Menorepoçš„å·¥ä½œï¼Œå¹¶æä¾›æœ‰ç”¨çš„å®ç”¨ç¨‹åºã€‚</p>
<p>å®˜æ–¹ä»‹ç»ï¼š</p>
<blockquote>
<p>Nxæ˜¯ä¸€ä¸ªæ™ºèƒ½ã€å¿«é€Ÿå’Œå¯æ‰©å±•çš„æ„å»ºç³»ç»Ÿï¼Œå…·æœ‰ä¸€æµçš„Monorepoæ”¯æŒå’Œå¼ºå¤§çš„é›†æˆã€‚</p>
</blockquote>
<p>Nxçš„ç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li>åŠ å¿«ä½ çš„å‰ç«¯é¡¹ç›®å·¥ç¨‹åŒ–</li>
<li>æä¾›ä¸€æµçš„å¼€å‘ä½“éªŒ</li>
</ul>
<p>å¤§éƒ¨åˆ†æƒ…å†µéœ€è¦äº†è§£çš„å°±æ˜¯ä¸‹é¢6ä¸ªæŒ‡ç‚¹å°±å¤Ÿäº†ã€‚</p>
<ul>
<li>nx run-many</li>
<li>dependency graph + nx affected</li>
<li>nx-enforce-module-boundaries es-linting</li>
<li>computation cache</li>
<li>nx cloud</li>
<li>buildable libs</li>
</ul>
<p>nxä¼šè‡ªåŠ¨å¼•å…¥ä¸Šä¸€æ¬¡buildçš„cacheç¼“å­˜ï¼Œä»è€ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦.åœ¨<a href="https://nx.dev/concepts/how-caching-works">How Caching Works</a>è¿™ç¯‡æ–‡ç« ä¸­éå¸¸è¯¦ç»†åœ°è¯´æ˜äº† nx ç¼“å­˜æ„å»ºç»“æœçš„æœºåˆ¶ï¼š</p>
<p>nx ä¼šè®¡ç®—å½“å‰æ‰§è¡Œçš„ target çš„ Hash ä½œä¸º cache keyï¼Œåœ¨ target æ‰§è¡Œå®ŒæˆåæŠŠæ„å»ºè¾“å‡ºï¼ˆåŒ…æ‹¬ç»ˆç«¯è¾“å‡ºã€æ„å»ºç»“æœæ–‡ä»¶ï¼‰ä½œä¸ºç¼“å­˜å†…å®¹å­˜å‚¨èµ·æ¥ã€‚</p>
<p><img src="img/Untitled%2013.png" alt="Untitled" /></p>
<p>æœ€å¸¸ç”¨çš„åŠ¨ä½œ</p>
<ul>
<li>å°†æ‰€æœ‰çš„å­é¡¹ç›®ç»Ÿä¸€æ‰“åŒ…ç¼–è¯‘ï¼Œå‘½ä»¤:<code>npx nx run-many --target=build</code></li>
<li>å¦‚æœä¸éœ€è¦ä½¿ç”¨cacheç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤:<code>npx nx run-many --target=build --skip-nx-cache</code></li>
<li>å¦‚æœéœ€è¦æŸ¥çœ‹å½“å‰å­é¡¹ç›®ä¾èµ–çš„é¡¹ç›®æ˜¯å¦è¢«ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š<code>npx nx affected --target=buil</code>d</li>
<li>å¦‚æœéœ€è¦æŸ¥çœ‹å½“å‰å­é¡¹ç›®ä¾èµ–çš„å›¾ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š<code>npx nx graph</code></li>
</ul>
<p>æ¯”å¦‚ä¾èµ–å¦‚ä¸‹ã€‚</p>
<pre><code class="language-tsx">$ pnpm project-graph

&gt; your-node-v20-menoreopo-project@ project-graph /Users/alfred/workspace/npmstudy/your-node-v20-menoreopo-project
&gt; nx graph

 &gt;  NX   Project graph started at http://127.0.0.1:4211/projects
</code></pre>
<p><img src="img/Untitled%2014.png" alt="Untitled" /></p>
<p>nxé™¤äº†æœ¬åœ°æ¢æˆï¼Œå…¶å®è¿˜æ”¯æŒäº‘æœåŠ¡ï¼ˆremote cacheï¼‰ã€‚å³nx.appï¼Œå¦‚æœçœŸçš„å¯¹ci/cdæœ‰æå¼ºçš„éœ€æ±‚ï¼Œå…¶å®ä¹Ÿæ˜¯å¯ä»¥è€ƒè™‘é€‰æ‹©çš„ã€‚</p>
<p><img src="img/Untitled%2015.png" alt="Untitled" /></p>
<p>åœ¨https://github.com/npmstudy/your-node-v20-menoreopo-project é¡¹ç›®é‡Œï¼Œæˆ‘ä»¬å…¶å®åªç”¨äº†éå¸¸ç®€å•çš„npm nx run-many</p>
<pre><code class="language-tsx">  	&quot;build&quot;: &quot;nx run-many -t build&quot;,
    &quot;build:fast&quot;: &quot;nx run-many -t build:fast&quot;,
    &quot;dev&quot;: &quot;nx run-many -t dev&quot;,
    &quot;test&quot;: &quot;nx run-many -t test&quot;,
</code></pre>
<p>è™½ç„¶å¤šäº†ä¸€ä¸ªnxæ¨¡å—ï¼Œä½†æ‰§è¡Œçš„æ—¶å€™èƒ½å¤Ÿåˆ©ç”¨æœ¬åœ°ç¼“å­˜ï¼ŒåŠ å¿«æ‰“åŒ…ã€æµ‹è¯•é€Ÿåº¦ï¼Œå·²ç»æ˜¯éå¸¸å¥½çš„äº‹å„¿ã€‚</p>
<h2 id="changesets"><a class="header" href="#changesets">Changesets</a></h2>
<p>Changesets æ˜¯ä¸€ä¸ªç”¨äº Monorepo é¡¹ç›®ä¸‹ç‰ˆæœ¬ä»¥åŠ Changelog æ–‡ä»¶ç®¡ç†çš„å·¥å…·ã€‚ç›®å‰ä¸€äº›æ¯”è¾ƒç«çš„ Monorepo ä»“åº“éƒ½åœ¨ä½¿ç”¨è¯¥å·¥å…·è¿›è¡Œé¡¹ç›®çš„å‘åŒ…ä¾‹å¦‚ pnpmã€mobx ç­‰ã€‚</p>
<p>changesets ä¸»è¦å…³å¿ƒ monorepo é¡¹ç›®ä¸‹å­é¡¹ç›®ç‰ˆæœ¬çš„æ›´æ–°ã€changelog æ–‡ä»¶ç”Ÿæˆã€åŒ…çš„å‘å¸ƒã€‚ä¸€ä¸ª changeset æ˜¯ä¸ªåŒ…å«äº†åœ¨æŸä¸ªåˆ†æ”¯æˆ–è€… commit ä¸Šæ”¹åŠ¨ä¿¡æ¯çš„ md æ–‡ä»¶ï¼Œå®ƒä¼šåŒ…å«è¿™æ ·ä¸€äº›ä¿¡æ¯:</p>
<ul>
<li>éœ€è¦å‘å¸ƒçš„åŒ…</li>
<li>åŒ…ç‰ˆæœ¬çš„æ›´æ–°å±‚çº§(éµå¾ª semver è§„èŒƒ)</li>
<li>CHANGELOG ä¿¡æ¯</li>
</ul>
<p>åœ¨ changesets å·¥ä½œæµä¼šå°†å¼€å‘è€…åˆ†ä¸ºä¸¤ç±»äººï¼Œä¸€ç±»æ˜¯é¡¹ç›®çš„ç»´æŠ¤è€…ï¼Œè¿˜æœ‰ä¸€ç±»ä¸ºé¡¹ç›®çš„å¼€å‘è€…ï¼Œä¸¤è€…çš„èŒè´£å¯ä»¥é€šè¿‡å¦‚ä¸‹æµç¨‹å›¾å¾ˆç®€æ´çš„è¡¨ç¤ºå‡ºæ¥:</p>
<p><img src="img/Untitled%2016.png" alt="Untitled" /></p>
<p>æ ¹æ®ä¸Šå›¾ï¼Œ changesets çš„å·¥ä½œæµç¨‹æ˜¯è¿™æ ·ï¼šå¼€å‘è€…åœ¨ Monorepo é¡¹ç›®ä¸‹è¿›è¡Œå¼€å‘ï¼Œå¼€å‘å®Œæˆåï¼Œç»™å¯¹åº”çš„å­é¡¹ç›®æ·»åŠ ä¸€ä¸ª changesets æ–‡ä»¶ã€‚é¡¹ç›®çš„ç»´æŠ¤è€…åé¢ä¼šé€šè¿‡ changesets æ¥æ¶ˆè€—æ‰è¿™äº›æ–‡ä»¶å¹¶è‡ªåŠ¨ä¿®æ”¹æ‰å¯¹åº”åŒ…çš„ç‰ˆæœ¬ä»¥åŠç”Ÿæˆ CHANGELOG æ–‡ä»¶ï¼Œæœ€åå°†å¯¹åº”çš„åŒ…å‘å¸ƒå‡ºå»ã€‚</p>
<p>å¸¸ç”¨çš„å‘½ä»¤åªæœ‰addã€versionã€publish</p>
<p><img src="img/Untitled%2017.png" alt="Untitled" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../6/6.1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../6/6.3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../6/6.1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../6/6.3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
