# 2ã€Hello TypeScript

TypeScript æ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘çš„è‡ªç”±å’Œå¼€æºçš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œå¯ä»¥ç¼–è¯‘æˆçº¯ JavaScriptã€‚TypeScript åœ¨ JavaScript çš„åŸºç¡€ä¸Šæ·»åŠ äº†å¯é€‰çš„**é™æ€ç±»å‹**å’Œ**åŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œ**ç»“åˆäº†ç±»å‹æ£€æŸ¥å’Œé™æ€åˆ†æï¼Œæ˜¾å¼æ¥å£ï¼Œä»¥åŠç±»å‹å¯¹ç¼–è¾‘å™¨çš„å¢å¼ºæ”¶ç›Šï¼Œä½¿å¾—TypeScriptåœ¨JavaScriptå¼€å‘è€…ä¸­ä½¿ç”¨å æ¯”éå¸¸é«˜ï¼Œå¤§æœ‰æ›¿æ¢ä¹‹åŠ¿ã€‚

åœ¨tsé‡ŒåŠ å…¥ç±»å‹ï¼Œåœ¨ç¼–è¯‘æˆjsçš„æ—¶å€™æ“¦é™¤ç±»å‹ã€‚åœ¨[Playground](https://www.typescriptlang.org/play?#code/DYUwLgBArgziBOA5AhgWxALhmeBLAdgOYQC8EA5ABYjDAD25QA)é‡Œæµ‹è¯•ï¼Œå¦‚ä¸‹å›¾ã€‚

![Untitled](img/Untitled.png)

å®ƒæœ‰å¦‚ä¸‹6ä¸ªç‰¹æ€§ã€‚

![Untitled](img/Untitled%201.png)

1ã€è·¨å¹³å°ï¼šTypeScriptç¼–è¯‘å™¨å¯ä»¥å®‰è£…åœ¨ä»»ä½•æ“ä½œç³»ç»Ÿä¸Šï¼Œå¦‚Windowsã€MacOSå’ŒLinuxã€‚

2ã€é¢å‘å¯¹è±¡è¯­è¨€ï¼šTypeScriptæä¾›äº†ç±»ã€æ¥å£å’Œæ¨¡å—ç­‰åŠŸèƒ½ã€‚å› æ­¤ï¼Œå¯ä»¥ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¼€å‘ç¼–å†™é¢å‘å¯¹è±¡çš„ä»£ç ã€‚

3ã€é™æ€ç±»å‹æ£€æŸ¥ï¼šTypeScriptä½¿ç”¨é™æ€ç±»å‹ï¼Œå¹¶åœ¨ç¼–è¯‘æ—¶å¸®åŠ©è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨ç¼–å†™ä»£ç æ—¶æ‰¾åˆ°é”™è¯¯ï¼Œè€Œæ— éœ€è¿è¡Œè„šæœ¬ã€‚

4ã€å¯é€‰çš„é™æ€ç±»å‹ï¼šå¦‚æœæ‚¨ä½¿ç”¨JavaScriptçš„åŠ¨æ€ç±»å‹ï¼Œåˆ™TypeScriptè¿˜å…è®¸å¯é€‰çš„é™æ€ç±»å‹ã€‚

5ã€IDEæ”¯æŒï¼šæ— è®ºVSCodeè¿˜æ˜¯WebStormç­‰éƒ½æœ‰æ›´å¥½çš„æ”¯æŒã€‚

6ã€ES6æ–°ç‰¹æ€§æ”¯æŒï¼šTypeScriptåŒ…å«äº†è®¡åˆ’ä¸­çš„ECMAScript 2015ï¼ˆES 6ã€7ï¼‰çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œå¦‚ç±»ã€æ¥å£ã€ç®­å¤´å‡½æ•°ç­‰ã€‚

å…¶å®ï¼ŒTypeScriptçœŸæ­£å‰å®³çš„æ˜¯ä»–çš„èƒŒæ™¯ï¼Œå‡ºèº«åé—¨ï¼ŒåŒè¾ˆçˆ¶è¾ˆéƒ½æ˜¯ç‹ äººã€‚

![Untitled](img/Untitled%202.png)

1ã€èƒŒåé‡‘ä¸»æ˜¯å¾®è½¯ï¼Œå®ƒå°±æ˜¯åœ°ä¸»å®¶çš„å°å„¿å­ã€‚

2ã€äº²çˆ¹æ˜¯å®‰å¾·æ–¯Â·æµ·å°”æ–¯ä¼¯æ ¼ï¼ˆAnders Hejlsbergï¼‰ï¼Œ1960å¹´12æœˆå‡ºç”Ÿäºä¸¹éº¦å“¥æœ¬å“ˆæ ¹ï¼Œæ›¾åœ¨ä¸¹éº¦ç§‘æŠ€å¤§å­¦å­¦ä¹ å·¥ç¨‹å­¦ï¼Œè®¡ç®—æœºç§‘å­¦å®¶ã€‚ Turbo Pascalç¼–è¯‘å™¨çš„ä¸»è¦ä½œè€…ï¼ŒDelphiã€C#å’ŒTypeScriptä¹‹çˆ¶ã€‚ä»–æ˜¯åˆ›é€ Borlandä¼ å¥‡çš„ç”·äººã€‚

3ã€å®ƒçš„å“¥å“¥æ˜¯VSCodeï¼Œå¹²ç¿»Atomï¼Œ[åœ¨2021å¹´å¼€å‘äººå‘˜å æ¯”å°±è¶…è¿‡äº†50%](https://www.zdnet.com/article/visual-studio-code-how-microsofts-any-os-any-programming-language-any-software-plan-is-paying-off/)ï¼Œï¼ˆæ€»äººæ•°2400ä¸‡ï¼Œæœ‰1400ä¸‡å®‰è£…äº†ï¼‰ï¼Œå…¶ä»–è¯­è¨€å·¥ç¨‹å¸ˆæˆ‘ä¸æ¸…æ¥šï¼Œè‡³å°‘å‰ç«¯Nodeç»å¤§éƒ¨åˆ†éƒ½æ˜¯VSCodeæˆ–è€…VSCode+WebStormåŒä¿®ã€‚

4ã€ä»–å¤§çˆ·ï¼ˆå“¥å“¥çš„çˆ¸çˆ¸ï¼‰æ˜¯Erich Gammaï¼Œã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶åŸºç¡€ã€‹çš„å››äººå¸®ä¹‹ä¸€ã€‚

# ä¸ºä»€ä¹ˆè¦ç”¨TypeScriptï¼Ÿ

æ­£å¸¸æ¥è®²ï¼Œåªä¼šESMå†™æ³•ä¹Ÿæ˜¯è¶³å¤Ÿå¼€å‘Node.jsç”¨çš„ï¼ŒæŒæ¡äº†TypeScriptå¯ä»¥æ›´å¥½çš„åº”å¯¹å¤§è§„æ¨¡åº”ç”¨å¼€å‘ï¼Œå¤šèŠ±ä¸€ç‚¹æ—¶é—´ï¼Œå¯¹å¯ç»´æŠ¤æ€§æ›´å¥½ã€‚

- è‰¯å¥½çš„ç±»å‹æ”¯æŒæ˜¯ç°ä»£æ¡†æ¶å¿…é¡»çš„åŠŸèƒ½
- å¯ç»´æŠ¤æ€§å¤§å¤§æå‡ï¼Œä¸ºè¿­ä»£æ‰“ä¸‹åšå®åŸºç¡€
- é€‚ç”¨äºå¤§è§„æ¨¡å¼€å‘

![Untitled](img/Untitled%203.png)

## é»‘ç²‰

![Untitled](img/Untitled%204.png)

Ruby on Railsä½œè€…DHHåœ¨2023å¹´å®£å¸ƒåœ¨Turbo 8ä¸­æ”¾å¼ƒä½¿ç”¨TypeScriptï¼Œç¬”è€…ä»¥ä¸ºRailsæœ¬èº«è¿½æ±‚çš„æ˜¯å¼€å‘æ•ˆç‡ï¼Œåäº”åˆ†é’Ÿå†™ä¸€ä¸ªBlogï¼Œç»“æœåŠ äº†TypeScriptï¼Œäº”åˆ†é’Ÿè¿˜æ²¡å†™å®Œç±»å‹å®šä¹‰ã€‚æ•æ·ç¤¾åŒºå–œæ¬¢æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰ï¼Œæœ¬æ¥åªéœ€è¦æ”¹æ”¹ä»£ç å°±è¡Œï¼Œç°åœ¨è¿˜è¦ç®¡ç±»å‹å®šä¹‰å’Œç±»å‹ æµ‹è¯•ï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™æ ·åšçš„æ•ˆç‡å’Œè´¨é‡æ˜¯çŸ›ç›¾çš„ï¼Œåœ¨æ”¶ç›Šä¸å¤Ÿé«˜çš„æ—¶å€™ï¼Œæ”¾å¼ƒä¹Ÿæ˜¯æ­£å¸¸ã€‚å‹å’Œæµ‹è¯•éƒ½æ˜¯ä¸€ä¸ª[ä¸Šä¸‹æ–‡](https://link.zhihu.com/?target=https%3A//www.jdon.com/tag-15977/)çš„ä¸Šæ–‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡çš„é¢„è®¾ï¼Œå¦‚æœé¢„è®¾ç±»å‹é”™è¯¯äº†ï¼Œå…¨ç›˜çš†è¾“ï¼Œæ— ç±»å‹çš„Javascriptåˆ™åœ¨æ¢ç´¢ä¸ç¡®å®šé—®é¢˜ä¸Šæ•ˆç‡æ›´é«˜ã€‚

1ã€Railsæ˜¯å´‡å°šæ•ˆç‡çš„æ¡†æ¶ï¼Œæˆªå›¾ä¸­5åˆ†é’Ÿé‚£ä¸ªæœ‰è¯¯ï¼Œæ—©åœ¨2005å¹´[dhh](https://www.zhihu.com/search?q=dhh&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3222336155%7D)æˆåä¹‹ä½œï¼Œå°±æ˜¯15åˆ†é’Ÿå†™ä¸€ä¸ªBlogã€‚æ‰€ä»¥åŠ äº†tsï¼Œä¼šé˜»ç¢æ•ˆç‡ï¼Œå¯¹äºè¿™æ ·ä¸€ä¸ªè¿½æ±‚æè‡´æ•ˆç‡çš„å›¢é˜Ÿï¼Œå¼ƒç”¨æ˜¯æ­£å¸¸çš„ã€‚

2ã€TSé€‚åˆçš„æ˜¯å¤§å‹é¡¹ç›®ï¼Œå›¢é˜Ÿæ°´å¹³è¦ä¹ˆå¾ˆé«˜ï¼Œè¦ä¹ˆå¾ˆä½ï¼Œå…¶å®æ•ˆæœéƒ½æ˜¯éå¸¸å¥½çš„ã€‚è€ŒRailså…¶å®ä¸æ˜¯å¾ˆå¤§å‹çš„é¡¹ç›®ï¼Œæˆ‘æ²¡å¤ªè§è¿‡ï¼Œå¤§å®¶éƒ½æ˜¯æƒ³å¿«é€Ÿäº¤ä»˜ã€‚

3ã€Rubyç¤¾åŒºæœ‰[æ•æ·åŸºå› ](https://www.zhihu.com/search?q=%E6%95%8F%E6%8D%B7%E5%9F%BA%E5%9B%A0&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3222336155%7D)ï¼Œå–œæ¬¢TDDæˆ–XPï¼Œä»£ç å˜åŠ¨æå¿«çš„æƒ…å†µä¸‹ï¼Œè¦æŠŠæµ‹è¯•æ”¹å®Œï¼Œè¦å…³æ³¨ç±»å‹æµ‹è¯•ï¼Œå°±ä¼šå¤šå‡ºéå¸¸å¤šçš„å·¥ä½œã€‚

4ã€Railsç¨‹åºå‘˜ä¹Ÿéƒ½æ˜¯ä»¥Rubyä¸ºä¸»ï¼Œjsä¸ºè¾…ã€‚å½“jsèƒ½å®Œæˆï¼Œéè¦ç”¨tsæï¼Œä¼šå¸¦æ¥å¾ˆå¤šè´Ÿæ‹…ï¼Œå¯¹ä»–ä»¬è€Œè¨€roiä¸é«˜ã€‚å‰ç«¯ä¹‹æ‰€ä»¥å–œæ¬¢tsï¼Œå‰ç«¯ä¼šjsä¸ºä¸»ï¼Œä»¥tsä¸ºè¾…å°±å¾ˆç®€å•ã€‚

æŸäº›åœºæ™¯ç¡®å®ä¸éœ€è¦TSï¼Œçº¯ESå·²ç»æ¯”jså¥½å¾ˆå¤šäº†ï¼Œè¿™ç§çº¯ç”¨ES/JSçš„æ¯”ä¾‹æ˜¯æ¯”è¾ƒå°‘çš„ã€‚

## å¥‰è‹¥ç¥æ•™

ä¸»è¦äººç¾¤ï¼šå¤§å‚å‰ç«¯ã€å¼€æºè´¡çŒ®è€…ã€‚

TSé€‚åˆçš„æ˜¯å¤§å‹é¡¹ç›®ï¼Œå›¢é˜Ÿæ°´å¹³è¦ä¹ˆå¾ˆé«˜ï¼Œè¦ä¹ˆå¾ˆä½ã€‚

![Untitled](img/Untitled%205.png)

é«˜pä¼šæƒ³ï¼Œä¸‹é¢çš„ä¸€çº¿åŒå­¦å°‘çŠ¯ç‚¹ä½çº§é”™è¯¯ï¼Œå‚è€ƒç°åœ¨è¿™æ•…éšœåˆ†ï¼Œæå¾—äººå¿ƒæƒ¶æƒ¶ï¼Œå¦‚æœåªæ˜¯éº»çƒ¦ä¸€ä¸‹ä¸€çº¿å¼€å‘ï¼Œå¯¹ç¨³å®šæ€§æœ‰å¥½å¤„ï¼Œé—®é¢˜ä¸å¤§ã€‚ä¸€çº¿åŒå­¦ï¼Œå¤§å®¶éƒ½è§‰å¾—tsæŒºå…ˆè¿›ï¼Œåˆ«ç®¡ä¼šä¸ä¼šï¼Œç”¨ä¸Šå†è¯´ï¼Œä¸è¡Œè¿˜æœ‰anyå¤§æ³•ã€‚é€šå¸¸å¤§å‚éƒ½æ˜¯ä¼šæ¯”è¾ƒæ„¿æ„ç”¨tsçš„ã€‚

- è§„èŒƒï¼Œæ¯”é»‘é­”æ³•è¦é‡è¦ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯é€‰Reactçš„åŸå› 
- ä½çº§é”™è¯¯å°‘ï¼Œäººæ°´å¹³å¦‚æœé«˜ï¼Œå…¶å®ä¹Ÿæ— æ‰€è°“çš„ï¼Œå°±æ€•å‚å·®ä¸é½
- ä¸å·®é‚£ç‚¹æ—¶é—´ï¼Œdddd
- ä¸å‡ºæ•…éšœå•¥éƒ½å¥½ï¼Œç¨³å®šæ€§å‹åˆ°ä¸€åˆ‡ã€‚
- ä¼ æ‰¿ä¼šå¥½çš„å¤šï¼Œå–œæ¬¢ç ”ç©¶å¸¦ç€é£ã€‚

## ä¸­ç«‹

![Untitled](img/Untitled%206.png)

ä¸å¹ä¸é»‘ã€‚

<aside>
ğŸ’¡ ä»”ç»†æƒ³äº†ä¸€ä¸‹ï¼Œæˆ‘åº”è¯¥æ˜¯ä¸­ç«‹æ´¾ã€‚ä»Commonjsæ—¶ä»£è¿‡æ¥ï¼Œæˆ‘ä¹ æƒ¯jsï¼Œåœ¨å¤§å‚å¤šå¹´ï¼Œä¹Ÿä¹ æƒ¯äº†tså„ç§å¥‡æŠ€æ·«å·§ã€‚æˆ‘çš„è§‚ç‚¹æ˜¯å†™åº“è¦ä¸¥æ ¼ç”¨tsï¼Œå†™åº”ç”¨ï¼Œå¯ä»¥æ”¾å®½ï¼Œåä½œäººè¶Šå¤šï¼Œè¶Šåº”è¯¥å°‘ç”¨Hackã€‚

</aside>

æˆ‘çš„è§‚ç‚¹ï¼šå¯¹äºTSï¼Œä½ ä¸€å®šè¦å­¦ï¼Œä½†åœ¨ä¸åœ¨é¡¹ç›®ä½¿ç”¨ä¾ç…§å›¢é˜Ÿå’Œé¡¹ç›®ç±»å‹è€Œå®šã€‚

## ä¸¾ä¾‹çœ‹ä¸€ä¸‹tsæˆæœ¬

ä»¥tomcatä¸ºä¾‹ã€‚

```jsx
import debug from 'debug';
import Koa from 'koa';

import { Plugable } from './plugin';
import { mergeDeep } from './utils';

const log = debug('@tomrpc/core/fn');

const ProxyDefaultConfig = {
  proxy: {
    inject: 'before', //init | load | before | after
    before: [],
  },
};

export interface IProxyConfig {
  name?: string | 'tomapp';
  proxy?: {
    inject: 'init' | 'load' | 'before' | 'after';
    before: [];
  };
}

export class Proxy extends Plugable {
  public inject;

  constructor(cfg?: IProxyConfig) {
    super(mergeDeep(ProxyDefaultConfig, cfg));
  }

  proxy() {
    return async (ctx: Koa.BaseContext, next) => {
      log('proxy default');
      await next();
      log('proxy default end');
    };
  }
}
```

æœ€åˆçš„ç‰ˆæœ¬ï¼Œæˆ‘åŸºæœ¬ä¸ŠåªåŠ äº†å¿…è¦çš„ç±»å‹ã€‚æ¯”å¦‚é…ç½®é¡¹è¿™ç§ã€‚

ä»¥honoä¸ºä¾‹ã€‚

```jsx
import { HonoBase } from './hono-base'
import type { HonoOptions } from './hono-base'
import { RegExpRouter } from './router/reg-exp-router'
import { SmartRouter } from './router/smart-router'
import { TrieRouter } from './router/trie-router'
import type { Env, Schema } from './types'

export class Hono<
  E extends Env = Env,
  S extends Schema = {},
  BasePath extends string = '/'
> extends HonoBase<E, S, BasePath> {
  constructor(options: HonoOptions<E> = {}) {
    super(options)
    this.router =
      options.router ??
      new SmartRouter({
        routers: [new RegExpRouter(), new TrieRouter()],
      })
  }
}

export type MiddlewareHandler<
  E extends Env = any,
  P extends string = string,
  I extends Input = {}
> = (c: Context<E, P, I>, next: Next) => Promise<Response | void>
```

å¦å¤–ï¼Œrouterä¹Ÿæ˜¯ä¸ªå¥½ä¾‹å­

```jsx
/* eslint-disable @typescript-eslint/ban-ts-comment */
import type { Router, Result } from '../../router'
import { UnsupportedPathError, MESSAGE_MATCHER_IS_ALREADY_BUILT } from '../../router'

export class SmartRouter<T> implements Router<T> {
  name: string = 'SmartRouter'
  routers: Router<T>[] = []
  routes?: [string, string, T][] = []

  constructor(init: Pick<SmartRouter<T>, 'routers'>) {
    Object.assign(this, init)
  }

  add(method: string, path: string, handler: T) {
    if (!this.routes) {
      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT)
    }

    this.routes.push([method, path, handler])
  }

  match(method: string, path: string): Result<T> {
    if (!this.routes) {
      throw new Error('Fatal error')
    }

    const { routers, routes } = this
    const len = routers.length
    let i = 0
    let res
    for (; i < len; i++) {
      const router = routers[i]
      try {
        routes.forEach((args) => {
          router.add(...args)
        })
        res = router.match(method, path)
      } catch (e) {
        if (e instanceof UnsupportedPathError) {
          continue
        }
        throw e
      }

      this.match = router.match.bind(router)
      this.routers = [router]
      this.routes = undefined
      break
    }

    if (i === len) {
      // not found
      throw new Error('Fatal error')
    }

    // e.g. "SmartRouter + RegExpRouter"
    this.name = `SmartRouter + ${this.activeRouter.name}`

    return res as Result<T>
  }

  get activeRouter() {
    if (this.routes || this.routers.length !== 1) {
      throw new Error('No active router has been determined yet.')
    }

    return this.routers[0]
  }
}
```

ç®€å•ï¼Œè§„çŸ©ã€‚

trpc

# å…¥é—¨

TSå…¥é—¨æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œåé¢å­¦ä¹ æ›²çº¿ä¼šè¶Šæ¥è¶Šé™¡å³­ï¼Œæ— è®ºç±»å‹æ¨å¯¼ï¼Œè¿˜æ˜¯é¢å‘å¯¹è±¡ï¼Œéƒ½æ˜¯éœ€è¦æŠ•å…¥éå¸¸å¤§ç»å†å­¦ä¹ çš„ã€‚

æœ¬èŠ‚ä¸»è¦è®²è§£tså…¥é—¨å¿…é¡»è¦æŒæ¡çš„4ä¸ªç‚¹ã€‚

- è½¬è¯‘
- è¶…é›†
- ç±»å‹æ·»åŠ ä¸è‰ç²—
- å¦‚ä½•è¿è¡Œ

## è½¬è¯‘

ç¼–è¯‘å’Œè½¬è¯‘æ˜¯2ä¸ªæ¦‚å¿µã€‚

- ç¼–è¯‘ï¼ˆCompilationï¼‰æ˜¯æŒ‡å°†é«˜çº§è¯­è¨€ï¼ˆå¦‚Javaã€C++ç­‰ï¼‰ç¼–å†™çš„ä»£ç è½¬æ¢ä¸ºæœºå™¨è¯­è¨€ï¼ˆäºŒè¿›åˆ¶ä»£ç ï¼‰çš„è¿‡ç¨‹ã€‚
- è½¬è¯‘ï¼ˆTranspilationï¼‰æ˜¯æŒ‡å°†ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç è½¬æ¢ä¸ºå¦ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç çš„è¿‡ç¨‹ã€‚

![Untitled](img/Untitled%207.png)

ç¼–è¯‘å’Œè½¬è¯‘çš„ç›®çš„éƒ½æ˜¯å°†æºä»£ç è½¬æ¢ä¸ºç›®æ ‡ä»£ç ï¼Œä½†å®ƒä»¬çš„è¾“å‡ºç»“æœå’Œä½¿ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒã€‚ç¼–è¯‘é€šå¸¸ç”¨äºå°†é«˜çº§è¯­è¨€è½¬æ¢ä¸ºæœºå™¨ç ï¼Œä»¥ä¾¿åœ¨ç‰¹å®šçš„ç¡¬ä»¶å¹³å°ä¸Šç›´æ¥è¿è¡Œã€‚è½¬è¯‘åˆ™æ›´å¤šåœ°ç”¨äºå°†ä¸€ç§ç¼–ç¨‹è¯­è¨€è½¬æ¢ä¸ºå¦ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œä»¥ä¾¿åœ¨ä¸åŒçš„ç¯å¢ƒæˆ–æµè§ˆå™¨ä¸­è¿è¡Œã€‚

jsä¸–ç•Œå†æ¥æœ‰è½¬è¯‘çš„ä¼ ç»Ÿï¼Œè¢«åæ§½æœ€å¤šçš„å°±æ˜¯Brendan Eichç”¨äº†10å¤©å†™å‡ºæ¥çš„ç©å…·è¯­è¨€ï¼Œä½ å¯ä»¥éå¸¸è½»æ¾çš„åœ¨Chome Devtoolsé‡ŒæŠ˜è…¾å‡ºå¾ˆå¤šç¥å¥‡çš„bugã€‚å¦å¤–ï¼Œä½œä¸ºè„šæœ¬è¯­è¨€ï¼Œå®ƒå…¶å®ä¹Ÿä¸æ˜¯å¾ˆä¸¥æ ¼ï¼Œå„ç§è§„èŒƒä¹Ÿæ˜¯å¾ˆæ··ä¹±ï¼Œæ¯”å¦‚jscriptï¼Œactionscriptç­‰æ›¾ç»å°±éƒ½æ˜¯è®©äººåˆ†ä¸æ¸…æ¥šçš„ã€‚

åˆ°ç°ä»£Webå¼€å‘ï¼Œä»coffeescriptï¼ˆç±»Rubyï¼‰åˆ°Cappuccinoï¼ˆç±»Objective-cï¼‰åˆ°rescriptï¼ˆç±»OCamlè¯­æ³•ï¼‰ï¼Œåˆ°typescriptéƒ½æ˜¯è½¬è¯‘çš„æ€è·¯ã€‚æœ€ç¥å¥‡çš„ç«Ÿç„¶æ˜¯esè§„èŒƒå‘å±•å¤ªå¿«ï¼Œäºæ˜¯è¯ç”Ÿäº†babeljsè¿™æ ·çš„ç°ä»£jsè½¬è¯‘ã€‚é™¤äº†è½¬è¯‘è§„èŒƒï¼Œç§»é™¤ç±»å‹ï¼Œå•¥ä¹Ÿä¸å¹²ã€‚

![Untitled](img/Untitled%208.png)

Typescriptåšçš„ä¸»è¦çš„äº‹å„¿å°±4ä»¶

- å¢åŠ ç±»å‹ï¼Œè¿™æ˜¯babelæ²¡æœ‰çš„ã€‚
- babelè¶…é›†ï¼Œå¯ä»¥è¯´babelæ”¯æŒçš„å®ƒåŸºæœ¬éƒ½æ”¯æŒï¼ŒåŒ…å«å¾ˆå¤šesæ–°ç‰¹æ€§ã€‚
- éƒ¨åˆ†å¢å¼ºï¼Œæ¯”å¦‚interfaceï¼Œè¿™æ˜¯babelæ²¡æœ‰çš„ã€‚
- è½¬è¯‘æ—¶æ“¦é™¤ç±»å‹ï¼Œæ¯”å¦‚`type`Â å’Œinterfaceä¸€æ ·ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè¢«æŠ¹é™¤ã€‚

## è¶…é›†

JavaScriptå¾ˆå®¹æ˜“å­¦ä¹ ï¼Œè€ŒTypeScriptçš„å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œéœ€è¦äº‹å…ˆæœ‰è„šæœ¬ç¼–ç¨‹çŸ¥è¯†ã€‚
JavaScriptæ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œè€ŒTypeScriptæ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ã€‚
TypeScriptæ”¯æŒæ¨¡å—ï¼Œè€ŒJavaScriptä¸æ”¯æŒã€‚
TypeScriptæ”¯æŒé™æ€ç±»å‹ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥æ­£ç¡®çš„ç±»å‹ï¼Œè€ŒJavaScriptä¸æ”¯æŒã€‚
TypeScriptä»£ç å¿…é¡»ç¼–è¯‘ï¼Œä½†ç¼–è¯‘JavaScriptæ˜¯ä¸å¿…è¦çš„ã€‚
TypeScriptæ”¯æŒå¯é€‰å‚æ•°å‡½æ•°ï¼Œè€ŒJavaScriptä¸æ”¯æŒã€‚
JavaScriptæœ‰ä¸€ä¸ªåºå¤§çš„å¼€å‘è€…ç¤¾åŒºï¼Œè€ŒTypeScriptæ²¡æœ‰ã€‚

![Untitled](img/Untitled%209.png)

## ç±»å‹æ·»åŠ ä¸æ“¦é™¤

å¯¹äºä¸€é—¨è¯­è¨€æ¥è¯´ï¼Œè‚¯å®šç¦»ä¸å¼€åŸºæœ¬æ•°æ®ç±»å‹å’Œè‡ªå®šä¹‰ç±»å‹ã€‚tsæä¾›äº†ä¸€ç³»åˆ—çš„å…³é”®å­—ä½œä¸ºç‰¹æ®Šç±»å‹ä»£å·ï¼Œå…¶ä»–çš„éƒ½å¥½è¯´ï¼Œå”¯ä¸€è®©æˆ‘æœ‰ç‚¹å…´è¶£çš„æ˜¯[`è”åˆç±»å‹`](https://www.zhihu.com/search?q=%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3126865898%7D)ï¼Œè¿™éå¸¸æœ‰è¶£çš„ä¸€ä¸ªç‰¹æ€§ã€‚

- `typeof` å…³é”®å­—ç”¨äºåˆ¤æ–­æ˜¯å¦æ˜¯æŸç§ç±»å‹
- `string` è¡¨æ˜æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå®ƒä¸åŒäºJavaï¼Œé¦–å­—æ¯æ˜¯å°å†™
- `boolean` å’Œ `Boolean`ç±»å‹æ˜¯ä¸åŒçš„
- `number` ç›´æ¥è¡¨ç¤ºæ•°å­—ç±»å‹ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šéº»çƒ¦çš„ç²¾åº¦é—®é¢˜ï¼ˆ0bã€0Oã€0xæŒ‡æ˜è¿›åº¦é—®é¢˜ï¼‰
- [`any`](https://www.zhihu.com/search?q=any&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3126865898%7D) æ˜¯ä¸‡èƒ½ç±»å‹ï¼Œç›¸å½“äºJavaä¸­çš„Objectï¼Œå…¨éƒ¨æ˜¯anyç›¸å½“äºæ˜¯æ™®é€šjsã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æ¨tsï¼Œå°±å¯ä»¥ä¸€è·¯anyåˆ°å¤©æ˜
- `never` è¡¨ç¤ºé‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼ç±»å‹
- `object` è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œå’ŒJavaä¸­çš„ä¸å¤ªä¸€æ ·
- `string | number` ç±»ä¼¼è¿™æ ·çš„æ˜¯è”åˆç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸ç¥å¥‡çš„ä¸€ç‚¹ã€‚è¿™é‡Œåªå…è®¸è¿™ä¸¤ç§ç±»å‹çš„è½¬æ¢ï¼Œå¹¶ä¸”èƒ½è°ƒç”¨çš„æ–¹æ³•ï¼Œè¦å–ä¸¤è€…äº¤é›†
- `` ä¹‹é—´çš„å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ç±»ä¼¼shellçš„è¯­æ³•ï¼Œåšæ¨¡ç‰ˆ `${}`
- `readonly` è¿™ç«Ÿç„¶æ˜¯ä¸ªå…³é”®å­—ï¼Œè¡¨æ˜åªè¯»å±æ€§
- `[propName: string]: any;` è¿™ä¸€è¡Œä»£ç å€¼å¾—ç ”ç©¶ï¼Œä½†ä¸æ¨èè¿™ä¹ˆåš
- `number[]` æ•°ç»„å’ŒJavaç±»ä¼¼ï¼Œä¸è¿‡è¿™æ˜¯å£°æ˜åç½®çš„è¯­æ³•ï¼Œå€¼ä½¿ç”¨[]å£°æ˜ï¼Œè€Œä¸æ˜¯{}
- `function` å‡½æ•°å’Œjavascriptçš„æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œæœ‰ä¸¤ç§å£°æ˜æ–¹å¼ã€‚[lambda](https://www.zhihu.com/search?q=lambda&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3126865898%7D)å¯¹jsæ¥è¯´è‚¯å®šæ˜¯å¼ºé¡¹
- `=>`çš„è¯­æ³•ä¹Ÿæ¯”è¾ƒæ¶å¿ƒäººï¼Œå’ŒES6è”åˆèµ·æ¥å¯ä»¥å†™ä¸€å¤§ç¯‡æ–‡ç« 
- `...rest` æ³¨æ„è¿™ä¸ªä¸œè¥¿ï¼ç±»ä¼¼Javaä¸­[å˜å‚](https://www.zhihu.com/search?q=%E5%8F%98%E5%8F%82&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3126865898%7D)çš„æ„æ€
- `as` æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºJavaçš„`cast`ï¼Œä½†å®ƒä¹Ÿä»…ä»…æ˜¯è¯­æ³•æ£€æŸ¥è€Œå·²ï¼Œè¿è¡Œæ—¶å¹¶æ— æ³•æ§åˆ¶ã€‚`(window as any)`å¾ˆé…·ï¼Œä½†å®¹æ˜“å‡ºé”™

ç”±äºjsæ˜¯ä¸€é—¨å¼±ç±»å‹çš„è¯­è¨€ï¼Œæœ‰å¾ˆå¤šçš„è¿è¡Œæ—¶è½¬æ¢ï¼Œå°±ä¸èƒ½ä½¿ç”¨ç±»ä¼¼äºJavaä¸€æ ·çš„å¼º[ç±»å‹è½¬æ¢](https://www.zhihu.com/search?q=%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3126865898%7D)æ–¹å¼ï¼Œæ‰€ä»¥[`typescript`](https://www.zhihu.com/search?q=typescript&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3126865898%7D)å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µé€šè¿‡è¯­è¨€ç‰¹æ€§å¢å¼ºä¸€äº›ç±»å‹æ£€æŸ¥çš„åŠŸèƒ½ã€‚è€Œåœ¨è¿è¡Œæ—¶ï¼Œå¤§å¤šæ•°æ ¹æœ¬å°±æ²¡æœ‰è¿™æ ·çš„åˆ¤æ–­ï¼Œæ‰€ä»¥tsæ›´åƒæ˜¯ä¸€ä¸ªè¿‡ç¨‹å·¥å…·ã€‚

![Untitled](img/Untitled%2010.png)

é‚£ä¹ˆåè¿‡æ¥æƒ³æƒ³å‘¢ï¼Ÿ

## å¦‚ä½•è¿è¡Œ

1ã€å†…ç½®runtime

```tsx
<script src="https://unpkg.com/typescript@4.9/lib/typescriptServices.js"></script>
<script>
const tsCode = 'let num: number = 123;';
const jsCode = window.ts.transpile(tsCode);
document.write(jsCode);
</script>
```

å¦å¤–ä¸€ä¸ªåšæ³•

æœ‰äº†è¿™ä¸ªç¯å¢ƒåˆ†ç¦»åŸºç¡€ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°åœ¨æµè§ˆå™¨ç«¯è¿è¡Œ ts compilerï¼å› ä¸º ts compiler æœ¬èº«ç¼–è¯‘åä¹Ÿæ˜¯ jsï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªæµè§ˆå™¨ç«¯çš„ compilerHost å°±å¯ä»¥ï¼Œtypescript å®˜æ–¹æä¾›äº†ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶æœåŠ¡åŒ…@typescript/vfs æä¾›æµè§ˆå™¨ç«¯å…¼å®¹çš„ fs æœåŠ¡

```tsx
import ts from 'typescript'
import tsvfs from '@typescript/vfs' // è™šæ‹Ÿæ–‡ä»¶æœåŠ¡
import lzstring from 'lz-string' // ä¸€ä¸ªå‹ç¼©ç®—æ³•

// ä»cdnåˆ›å»ºä¸Šä¸‹æ–‡ï¼ŒåŒ…å«äº†ts libçš„ç±»å‹åº“ï¼Œä»cdnæ‹‰å–
const fsMap = await tsvfs.createDefaultMapFromCDN(
  compilerOptions,
  ts.version,
  true,
  ts,
  lzstring
)
// å¯ä»¥è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿçš„æ–‡ä»¶ï¼Œæ–‡ä»¶åindex.tsï¼Œæ–‡ä»¶å†…å®¹ç¬¬äºŒä¸ªå‚æ•°
fsMap.set('index.ts', '/** typescript ä»£ç  **/')

const system = tsvfs.createSystem(fsMap)
// hostæ˜¯tsç¼–è¯‘å™¨å°†æ–‡ä»¶æ“ä½œéš”ç¦»å‡ºæ¥çš„éƒ¨åˆ†
// è¿™é‡Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„æ–‡ä»¶æœåŠ¡ï¼Œä¸ä¾èµ–nodejsï¼Œåœ¨æµè§ˆå™¨ä¸­å¯ç”¨
const host = tsvfs.createVirtualCompilerHost(system, compilerOptions, ts)

// åˆ›å»ºç¼–è¯‘ç¨‹åº
const program = ts.createProgram({
  rootNames: [...fsMap.keys()],
  options: compilerOptions,
  host: host.compilerHost,
})
```

å®˜æ–¹çš„Playgroundå…¶å®å°±æ˜¯è¿™ç§åŸç†ã€‚

2ã€è½¬è¯‘æˆjsåæ‰§è¡Œ

é€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘

```tsx
$ npm install -g typescript
$ tsc hello.ts
```

é€šè¿‡ä»£ç 

```tsx
const { outputText } = ts.transpileModule(your_ts_code, {
    compilerOptions: {
        strict: false,
        sourceMap: false,
        // å…¶ä»–ç¼–è¯‘é€‰é¡¹
    }
});
```

# TSå­¦ä¹ è¦ç‚¹

![Untitled](img/Untitled%2011.png)

æœ€æ€•å­¦åäº†

![Untitled](img/Untitled%2012.png)

1. ç”¨å¥½ç±»å‹ï¼Œä¸è¦é­”åŒ–
2. ç”¨å¥½OOï¼Œè¿™æ‰æ˜¯TSçš„å¦ä¸€ä¸ªä¼˜åŠ¿
3. Hackçš„ä¸œè¥¿å°‘ç”¨ï¼Œå¯ç»´æŠ¤æ€§æ›´é‡è¦

## ç±»å‹åŸºç¡€

ä»¥ä¸‹æ˜¯ä¸€äº›TypeScriptç‹¬æœ‰çš„è¯­æ³•å’Œç‰¹æ€§ï¼š

1. ç±»å‹æ³¨è§£ï¼šTypeScriptå¯ä»¥ä¸ºå˜é‡ã€å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›å€¼ç­‰æ·»åŠ ç±»å‹æ³¨è§£ï¼Œä»¥æŒ‡å®šå®ƒä»¬çš„æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼š

```tsx
let age: number = 25;
function add(a: number, b: number): number {
  return a + b;
}

```

1. æ¥å£ï¼šTypeScriptæ”¯æŒæ¥å£çš„å®šä¹‰ï¼Œç”¨äºæè¿°å¯¹è±¡çš„ç»“æ„å’Œè¡Œä¸ºã€‚æ¥å£å¯ä»¥å®šä¹‰å±æ€§ã€æ–¹æ³•ã€å¯é€‰å±æ€§ã€åªè¯»å±æ€§ç­‰ã€‚ä¾‹å¦‚ï¼š

```tsx
interface Person {
  name: string;
  age: number;
  sayHello(): void;
}

```

1. æ³›å‹ï¼šTypeScriptæ”¯æŒæ³›å‹ï¼Œç”¨äºåˆ›å»ºå¯é‡ç”¨çš„ã€ç±»å‹å®‰å…¨çš„ä»£ç ã€‚æ³›å‹å¯ä»¥åœ¨å‡½æ•°ã€ç±»ã€æ¥å£ä¸­ä½¿ç”¨ï¼Œä»¥å®ç°å¯¹ä¸åŒç±»å‹çš„æ”¯æŒã€‚ä¾‹å¦‚ï¼š

```tsx
function identity<T>(arg: T): T {
  return arg;
}
let result = identity<number>(10);

```

1. ç±»å‹åˆ«åå’Œè”åˆç±»å‹ï¼šTypeScriptæ”¯æŒç±»å‹åˆ«åï¼Œç”¨äºç»™ä¸€ä¸ªç±»å‹èµ·ä¸€ä¸ªæ–°çš„åå­—ã€‚å®ƒè¿˜æ”¯æŒè”åˆç±»å‹ï¼Œç”¨äºæŒ‡å®šä¸€ä¸ªå˜é‡å¯ä»¥æ˜¯å¤šä¸ªç±»å‹ä¸­çš„ä¸€ä¸ªã€‚ä¾‹å¦‚ï¼š

```tsx
type Point = {
  x: number;
  y: number;
};
type Shape = Circle | Rectangle | Triangle;

```

1. æšä¸¾ï¼šTypeScriptæ”¯æŒæšä¸¾ç±»å‹ï¼Œç”¨äºå®šä¹‰ä¸€ç»„å…·åçš„å¸¸é‡ã€‚æšä¸¾ç±»å‹å¯ä»¥æ˜¯æ•°å­—æšä¸¾æˆ–å­—ç¬¦ä¸²æšä¸¾ã€‚ä¾‹å¦‚ï¼š

```tsx
enum Color {
  Red,
  Green,
  Blue
}
let color: Color = Color.Red;

```

è¿™äº›æ˜¯TypeScriptç‹¬æœ‰çš„ä¸€äº›è¯­æ³•å’Œç‰¹æ€§ï¼Œå®ƒä»¬ä½¿å¾—TypeScriptç›¸æ¯”äºJavaScriptå…·æœ‰æ›´å¼ºå¤§çš„ç±»å‹æ£€æŸ¥å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„èƒ½åŠ›ã€‚é€šè¿‡ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†ä»£ç ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚

ä¸ºäº†è®©å¤§å®¶èƒ½æ›´å¥½åœ°ç†è§£å¹¶æŒæ¡ TypeScript å†…ç½®ç±»å‹åˆ«åï¼Œæˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸€ä¸‹ç›¸å…³çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚

1ã€**typeof**

åœ¨ TypeScript ä¸­ï¼Œ`typeof`Â æ“ä½œç¬¦å¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå˜é‡å£°æ˜æˆ–å¯¹è±¡çš„ç±»å‹ã€‚

```
interface Person {
  name: string;
  age: number;
}

const sem: Person = { name: 'semlinker', age: 30 };
type Sem= typeof sem;// -> Person

function toArray(x: number): Array<number> {
  return [x];
}

type Func = typeof toArray;// -> (x: number) => number[]

```

**2ã€keyof**

`keyof`Â æ“ä½œç¬¦å¯ä»¥ç”¨æ¥ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰ key å€¼ï¼š

```
interface Person {
    name: string;
    age: number;
}

type K1 = keyof Person;// "name" | "age"
type K2 = keyof Person[];// "length" | "toString" | "pop" | "push" | "concat" | "join"
type K3 = keyof { [x: string]: Person };// string | number

```

**3ã€ in**

`in`Â ç”¨æ¥éå†æšä¸¾ç±»å‹ï¼š

```
type Keys = "a" | "b" | "c"

type Obj =  {
  [p in Keys]: any
}// -> { a: any, b: any, c: any }

```

**4ã€infer**

åœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨Â `infer`Â å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚

```
type ReturnType<T> = T extends (
  ...args: any[]
) => infer R ? R : any;

```

ä»¥ä¸Šä»£ç ä¸­Â `infer R`Â å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚

ç»“åˆä¸‹é¢è¿™ç§ä¾‹å­ï¼Œæ¯”å¦‚å®¹æ˜“ç†è§£ï¼Œæå–æ•°ç»„çš„ç±»å‹ã€‚

```tsx
type T0 = string[];
type T1 = number[];

type UnpackedArray<T> = T extends (infer U)[] ? U : T
type U0 = UnpackedArray<T1> // number

let a:U0 = 1
```

å˜åŒ–ä¸€ä¸‹ï¼Œå¦‚æœUnpackedArrayå‚æ•°æ²¡æœ‰ç±»å‹ï¼Œæ­¤æ—¶çš„aå°±1æˆ–2ï¼Œè¿™å°±æ˜¯Tå­˜åœ¨çš„æ„ä¹‰çš„ã€‚

```tsx
type T0 = string[];
type T1 = number[];
type T2 = [1,2];

type UnpackedArray<T> = T extends (infer U)[] ? U : T
type U0 = UnpackedArray<T2> // number

let a:U0 = 1
```

æå–æ•°ç»„é‡Œçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥è¿™æ ·åšã€‚

```tsx
type First<T extends any[]> = T extends [infer A, ...infer test] ? A : never;
```

è¿˜æœ‰æ›´å¤æ‚çš„ä¾‹å­ï¼Œç®€å•çš„Includes

```tsx
type Includes<T extends readonly any[], U> = U extends T[number] ? true : false;
```

![Untitled](img/Untitled%2013.png)

å¦‚æœæ•°ç»„é‡Œï¼Œå«æœ‰å¯¹è±¡ã€æ•°ç»„å‘¢ï¼Ÿé€šè¿‡ extends + infer + rest + recursive å¯ä»¥ loop Tuple è¿”å›ä¸€ä¸ª Typeã€‚

```tsx
type Includes<T extends readonly any[], U> = T extends [infer First, ...infer Rest]
? Equal<U, First> extends true
  ? true
  : Includes<Rest, U>
: false;
```

è¿™æ ·ç©ä¸‹å»å°±å¾ˆæœ‰æ„æ€äº†

5ã€**extends**

æœ‰æ—¶å€™æˆ‘ä»¬å®šä¹‰çš„æ³›å‹ä¸æƒ³è¿‡äºçµæ´»æˆ–è€…è¯´æƒ³ç»§æ‰¿æŸäº›ç±»ç­‰ï¼Œå¯ä»¥é€šè¿‡ extends å…³é”®å­—æ·»åŠ æ³›å‹çº¦æŸã€‚

```
interface ILengthwise {
  length: number;
}

function loggingIdentity<T extends ILengthwise>(arg: T): T {
  console.log(arg.length);
  return arg;
}

```

ç°åœ¨è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸï¼Œå› æ­¤å®ƒä¸å†æ˜¯é€‚ç”¨äºä»»æ„ç±»å‹ï¼š

```
loggingIdentity(3);// Error, number doesn't have a .length property

```

è¿™æ—¶æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«å¿…é¡»çš„å±æ€§ï¼š

```
loggingIdentity({length: 10, value: 3});
```

æŒæ¡äº†è¿™äº›å†…å®¹ï¼Œå†çœ‹ä¸€äº›[https://github.com/type-challenges/type-challenges/blob/main/utils/index.d.ts](https://github.com/type-challenges/type-challenges/blob/main/utils/index.d.ts)å°±å®¹æ˜“å¤šäº†

```tsx
export type Expect<T extends true> = T
export type ExpectTrue<T extends true> = T
export type ExpectFalse<T extends false> = T
export type IsTrue<T extends true> = T
export type IsFalse<T extends false> = T

export type Equal<X, Y> =
  (<T>() => T extends X ? 1 : 2) extends
  (<T>() => T extends Y ? 1 : 2) ? true : false
export type NotEqual<X, Y> = true extends Equal<X, Y> ? false : true

// https://stackoverflow.com/questions/49927523/disallow-call-with-any/49928360#49928360
export type IsAny<T> = 0 extends (1 & T) ? true : false
export type NotAny<T> = true extends IsAny<T> ? false : true

export type Debug<T> = { [K in keyof T]: T[K] }
export type MergeInsertions<T> =
  T extends object
    ? { [K in keyof T]: MergeInsertions<T[K]> }
    : T

export type Alike<X, Y> = Equal<MergeInsertions<X>, MergeInsertions<Y>>

export type ExpectExtends<VALUE, EXPECTED> = EXPECTED extends VALUE ? true : false
export type ExpectValidArgs<FUNC extends (...args: any[]) => any, ARGS extends any[]> = ARGS extends Parameters<FUNC>
  ? true
  : false

export type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never
```

ä»¥Equalä¸¾ä¾‹

å¤§ä½¬Â [@mattmccutchen](https://link.zhihu.com/?target=https%3A//github.com/mattmccutchen)Â ç»™å‡ºäº†ä¸€ä¸ªéå¸¸ç²¾å½©çš„[è§£å†³æ–¹æ¡ˆ](https://link.zhihu.com/?target=https%3A//github.com/microsoft/TypeScript/issues/27024%23issuecomment-421529650)ï¼š

> Here's a solution that makes creative use of the assignability rule for conditional types, which requires that the types after
>
>
> ```
> Here's a solution that makes creative use of the assignability rule for conditional types, which requires that the types after extends be "identical" as that is defined by the checker:
> ts export type Equals<X, Y> = (<T>() => T extends X ? 1 : 2) extends (<T>() => T extends Y ? 1 : 2) ? true : false;
> This passes all the tests from the initial description that I was able to run except H, which fails because the definition of "identical" doesn't allow an intersection type to be identical to an object type with the same properties. (I wasn't able to run test E because I don't have the definition of Head.)
> ```
>

å‚è€ƒï¼š[https://zhuanlan.zhihu.com/p/597298193](https://zhuanlan.zhihu.com/p/597298193)

## é¢å‘å¯¹è±¡

TypeScriptæ˜¯JavaScriptçš„è¶…é›†ï¼Œå®ƒåœ¨JavaScriptçš„åŸºç¡€ä¸Šæ‰©å±•äº†ä¸€äº›ç‹¬æœ‰çš„è¯­æ³•å’Œç‰¹æ€§ï¼Œä»¥æä¾›æ›´å¼ºå¤§çš„ç±»å‹æ£€æŸ¥å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ”¯æŒã€‚

ä»Javaè¿‡æ¥çš„åŒå­¦ï¼Œä¼šå‘ç°è¿™äº›æ¦‚å¿µå’ŒJavaæ˜¯ç±»ä¼¼çš„ï¼Œä¸è¿‡tsçš„è¯­æ³•æ›´åŠ ç®€å•ã€‚

- `get` `set` ç«Ÿç„¶æ˜¯å…³é”®å­—ï¼Œåé¢å¯ç›´æ¥è·Ÿä¸Šå‡½æ•°ã€‚å¯ä»¥æ”¹å˜å±æ€§çš„èµ‹å€¼å’Œè¯»å–è¡Œä¸ºï¼
- `static`ã€`instanceof`ã€`public`ã€`protected`ã€`private`è¿™äº›ä¹Ÿéƒ½æ˜¯æœ‰çš„ï¼ŒçœŸçš„æ„Ÿè§‰å’Œå†™Javaæ²¡ä»€ä¹ˆä¸¤æ ·
- `constructor` é»˜è®¤æ˜¯æ„é€ æ–¹æ³•ï¼Œä¸åƒæ˜¯Javaè¦å’Œclassçš„åè¯ä¸€æ ·
- `abstract` ä¹Ÿæœ‰ï¼Œè¡¨æ˜å­ç±»å¿…é¡»å®ç°ï¼Œæ²¡ä»€ä¹ˆä¸¤æ ·
- å…³äºç±»å’Œæ¥å£çš„åŒºåˆ«ï¼Œæˆ‘è§‰å¾—ç†Ÿæ‚‰javaçš„ï¼Œå¯¹tsæ¥è¯´å°±æ˜¯é€æ˜çš„
- [èŒƒå‹](https://www.zhihu.com/search?q=%E8%8C%83%E5%9E%8B&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3126865898%7D)åœ¨Javaé‡Œï¼Œè¯­æ³•ä¹Ÿæ˜¯éå¸¸çš„å˜æ€ï¼Œå› ä¸ºä½ å¾ˆå¤šæ—¶å€™ä¸çŸ¥é“è¦æŠŠ`<>`æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹ã€‚åœ¨tsä¸­ï¼Œä¸€æ ·çš„éš¾å—ã€‚å…·ä½“æ€ä¹ˆç†Ÿæ‚‰ï¼Œåªæœ‰åœ¨å®è·µä¸­ç£¨ç»ƒäº†

ä¸‹é¢æ˜¯ä¸€æ®µç®€å•çš„tsä»£ç ï¼Œå¯ä»¥å¾ˆå¥½çš„è¡¨è¾¾é¢å‘å¯¹è±¡çš„å†™æ³•ã€‚

```tsx
class Animal {
    public name;
    protected a;
    private b: string;
    constructor(name) {
        this.name = name;
    }
    get name() {
	    return 'Jack';
		}
	  set name(value) {
	    console.log('setter: ' + value);
	  }
    sayhi() {
        return `my name is ${this.name}`;
    }
}

class Cat extends Animal {
    constructor(name) {
        super(name)
    }
    sayhi() {
        return "meow " + super.sayhi()
    }
    static iaAnimal(a) {
        return a instanceof Animal;
    }
}

function gen<T extends Animal>(name: T): void {
    console.log(name.name)
}
```

è™½ç„¶ JavaScript ä¸­æœ‰ç±»çš„æ¦‚å¿µï¼Œä½†æ˜¯å¯èƒ½å¤§å¤šæ•° JavaScript ç¨‹åºå‘˜å¹¶ä¸æ˜¯éå¸¸ç†Ÿæ‚‰ç±»ï¼Œè¿™é‡Œå¯¹ç±»ç›¸å…³çš„æ¦‚å¿µåšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚

- ç±»ï¼ˆClassï¼‰ï¼šå®šä¹‰äº†ä¸€ä»¶äº‹ç‰©çš„æŠ½è±¡ç‰¹ç‚¹ï¼ŒåŒ…å«å®ƒçš„å±æ€§å’Œæ–¹æ³•
- å¯¹è±¡ï¼ˆObjectï¼‰ï¼šç±»çš„å®ä¾‹ï¼Œé€šè¿‡Â `new`Â ç”Ÿæˆ
- å­˜å–å™¨ï¼ˆgetter & setterï¼‰ï¼šç”¨ä»¥æ”¹å˜å±æ€§çš„è¯»å–å’Œèµ‹å€¼è¡Œä¸º
- ä¿®é¥°ç¬¦ï¼ˆModifiersï¼‰ï¼šä¿®é¥°ç¬¦æ˜¯ä¸€äº›å…³é”®å­—ï¼Œç”¨äºé™å®šæˆå‘˜æˆ–ç±»å‹çš„æ€§è´¨ã€‚æ¯”å¦‚Â `public`Â è¡¨ç¤ºå…¬æœ‰å±æ€§æˆ–æ–¹æ³•
- æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰ï¼šæŠ½è±¡ç±»æ˜¯ä¾›å…¶ä»–ç±»ç»§æ‰¿çš„åŸºç±»ï¼ŒæŠ½è±¡ç±»ä¸å…è®¸è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨å­ç±»ä¸­è¢«å®ç°
- æ¥å£ï¼ˆInterfacesï¼‰ï¼šä¸åŒç±»ä¹‹é—´å…¬æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªæ¥å£ã€‚æ¥å£å¯ä»¥è¢«ç±»å®ç°ï¼ˆimplementsï¼‰ã€‚ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£

### é¢å‘å¯¹è±¡åŸºç¡€

é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰çš„ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€

- å°è£…ï¼ˆEncapsulationï¼‰ï¼šå°†å¯¹æ•°æ®çš„æ“ä½œç»†èŠ‚éšè—èµ·æ¥ï¼Œåªæš´éœ²å¯¹å¤–çš„æ¥å£ã€‚å¤–ç•Œè°ƒç”¨ç«¯ä¸éœ€è¦ï¼ˆä¹Ÿä¸å¯èƒ½ï¼‰çŸ¥é“ç»†èŠ‚ï¼Œå°±èƒ½é€šè¿‡å¯¹å¤–æä¾›çš„æ¥å£æ¥è®¿é—®è¯¥å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†å¤–ç•Œæ— æ³•ä»»æ„æ›´æ”¹å¯¹è±¡å†…éƒ¨çš„æ•°æ®
- ç»§æ‰¿ï¼ˆInheritanceï¼‰ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œå­ç±»é™¤äº†æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰ç‰¹æ€§å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ›´å…·ä½“çš„ç‰¹æ€§
- å¤šæ€ï¼ˆPolymorphismï¼‰ï¼šç”±ç»§æ‰¿è€Œäº§ç”Ÿäº†ç›¸å…³çš„ä¸åŒçš„ç±»ï¼Œå¯¹åŒä¸€ä¸ªæ–¹æ³•å¯ä»¥æœ‰ä¸åŒçš„å“åº”ã€‚æ¯”å¦‚Â `Cat`Â å’ŒÂ `Dog`Â éƒ½ç»§æ‰¿è‡ªÂ `Animal`ï¼Œä½†æ˜¯åˆ†åˆ«å®ç°äº†è‡ªå·±çš„Â `eat`Â æ–¹æ³•ã€‚æ­¤æ—¶é’ˆå¯¹æŸä¸€ä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬æ— éœ€äº†è§£å®ƒæ˜¯Â `Cat`Â è¿˜æ˜¯Â `Dog`ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨Â `eat`Â æ–¹æ³•ï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆ¤æ–­å‡ºæ¥åº”è¯¥å¦‚ä½•æ‰§è¡ŒÂ `eat`

### è£…é¥°å™¨å’ŒIoC

ä¸¾ä¾‹Midwayæˆ–Nestjsï¼Œä»–ä»¬éƒ½å±äºåŒä¸€ç±»çš„webæ¡†æ¶

æ§åˆ¶å™¨

```tsx
import { Controller, Get } from '@nestjs/common';
import { CatsService } from './cats.service';
import { Cat } from './interfaces/cat.interface';

@Controller('cats')
export class CatsController {
  constructor(private catsService: CatsService) {}

  @Get()
  async findAll(): Promise<Cat[]> {
    return this.catsService.findAll();
  }
}
```

æœåŠ¡å±‚

```tsx
import { Injectable } from '@nestjs/common';
import { Cat } from './interfaces/cat.interface';

@Injectable()
export class CatsService {
  private readonly cats: Cat[] = [];

  create(cat: Cat) {
    this.cats.push(cat);
  }

  findAll(): Cat[] {
    return this.cats;
  }
}
```

å®ç°è¦ç‚¹

1. è£…é¥°å™¨è·å–å…ƒæ•°æ®
2. é€šè¿‡inversify æˆ– typeåœ° åŸºäºtypescript çš„ioc æ¡†æ¶ï¼Œç»“åˆå…ƒæ•°æ®å®ç°ã€‚

å†ä¸¾ä¸ªä¾‹å­ï¼Œè¿™æ˜¯javaé‡Œçš„æµ‹è¯•æ¡†æ¶JUnitçš„å†™æ³•ã€‚

```bash
class MyFirstJUnitJupiterTests {

    private final Calculator calculator = new Calculator();

    @Test
    void addition() {
        assertEquals(2, calculator.add(1, 1));
    }
}
```

æ”¾åˆ°tsä¸–ç•Œï¼Œä½¿ç”¨ç±»ä¼¼äºmidwayçš„å†™æ³•ã€‚

1ã€ä½¿ç”¨æ³¨è§£

```bash
class MyFirstJUnitJupiterTests {
  private calculator = new Calculator();

  @Test
  addition() {
    assert.is(2, this.calculator.add(1, 1));
  }
}
```

2ã€ä½¿ç”¨iocå®¹å™¨æ³¨å…¥

```bash
class MyFirstJUnitJupiterTests {
  @Inject()
  calculator: Calculator;

  @Test
  addition() {
    assert.is(2, this.calculator.add(1, 1));
  }
}
```

è¿™é‡Œçš„@Testå®ç°å¦‚ä¸‹ã€‚

```tsx
export function Test(
  target: object | any,
  propertyName: string,
  descriptor: TypedPropertyDescriptor<any>,
) {
  debug(target[propertyName] + descriptor);

  //classname
  const className = target.constructor.name;

  if (!cache[className]) cache[className] = {};
  if (!cache[className][propertyName]) cache[className][propertyName] = {};

  cache[className][propertyName]["desc"] = "no display name";
  cache[className][propertyName]["fn"] = target[propertyName];
}
```

å…¶å®ï¼Œè¯´ç™½äº†å°±æ˜¯é€šè¿‡è£…é¥°å™¨ï¼Œè·å–æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯ï¼Œç­‰æ‰§è¡Œæµ‹è¯•çš„æ—¶å€™å†å»è°ƒç”¨ã€‚

### è®¾è®¡æ¨¡å¼

è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚

![Untitled](img/Untitled%2014.png)

- 5ç§ï¼ˆåˆ›å»ºå‹æ¨¡å¼ï¼‰ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€åŸå‹æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€‚
- 7ç§ï¼ˆç»“æ„å‹æ¨¡å¼ï¼‰ï¼šé€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚
- 11ç§ï¼ˆè¡Œä¸ºå‹æ¨¡å¼ï¼‰ï¼šç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€‚

æœ¬è¯¾ç¨‹ä½œä¸ºå…¥é—¨è¯¾ç¨‹ï¼Œä¸åšæ·±å…¥æ¢è®¨ï¼Œä»¥æ¨¡æ¿æ¨¡å¼ä¸¾ä¾‹ï¼Œè®©å¤§å®¶èƒ½å¤Ÿäº†è§£ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼å’Œå¤§è‡´åº”ç”¨å³å¯ã€‚

æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰ï¼Œåˆå«æ¨¡æ¿æ¨¡å¼(Template Pattern)ï¼Œåœ¨ä¸€ä¸ªæŠ½è±¡ç±»å…¬å¼€å®šä¹‰äº†æ‰§è¡Œå®ƒçš„æ–¹æ³•çš„æ¨¡æ¿ã€‚å®ƒçš„å­ç±»å¯ä»¥æŒ‰éœ€è¦é‡å†™æ–¹æ³•å®ç°ï¼Œä½†è°ƒç”¨å°†ä»¥æŠ½è±¡ç±»ä¸­å®šä¹‰çš„æ–¹å¼è¿›è¡Œã€‚

ç®€å•è¯´ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„ï¼Œå°±å¯ä»¥é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ï¼Œè¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚

ç”¨abstractå®šä¹‰æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°

1ã€æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨æŠ½è±¡ç±»ä¸­

2ã€æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œå®šä¹‰æ ‡å‡†åï¼Œå­ç±»ä¸­å¿…é¡»åŒ…å«æŠ½è±¡å®šä¹‰çš„æ–¹æ³•

```tsx
abstract class Futher { /* å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³• */
    public age: number;
    constructor(age: number) {
        this.age = age
    }
    abstract counts(): any; /* æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨æŠ½è±¡ç±»ä¸­ */
}

class children extends Futher {
    constructor(age: number) {
        super(age)
    }
    counts(): void {    /* å­ç±»ä¸­å¿…é¡»æœ‰æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³• */
        console.log(this.age - 1)
    }
}
```

ä¸¾ä¾‹æ¨¡ç‰ˆæ¨¡å¼

```tsx
/**
 * The Abstract Class defines a template method that contains a skeleton of some
 * algorithm, composed of calls to (usually) abstract primitive operations.
 *
 * Concrete subclasses should implement these operations, but leave the template
 * method itself intact.
 */
abstract class AbstractClass {
    /**
     * The template method defines the skeleton of an algorithm.
     */
    public templateMethod(): void {
        this.baseOperation1();
        this.requiredOperations1();
        this.baseOperation2();
        this.hook1();
        this.requiredOperation2();
        this.baseOperation3();
        this.hook2();
    }

    /**
     * These operations already have implementations.
     */
    protected baseOperation1(): void {
        console.log('AbstractClass says: I am doing the bulk of the work');
    }

    protected baseOperation2(): void {
        console.log('AbstractClass says: But I let subclasses override some operations');
    }

    protected baseOperation3(): void {
        console.log('AbstractClass says: But I am doing the bulk of the work anyway');
    }

    /**
     * These operations have to be implemented in subclasses.
     */
    protected abstract requiredOperations1(): void;

    protected abstract requiredOperation2(): void;

    /**
     * These are "hooks." Subclasses may override them, but it's not mandatory
     * since the hooks already have default (but empty) implementation. Hooks
     * provide additional extension points in some crucial places of the
     * algorithm.
     */
    protected hook1(): void { }

    protected hook2(): void { }
}

/**
 * Concrete classes have to implement all abstract operations of the base class.
 * They can also override some operations with a default implementation.
 */
class ConcreteClass1 extends AbstractClass {
    protected requiredOperations1(): void {
        console.log('ConcreteClass1 says: Implemented Operation1');
    }

    protected requiredOperation2(): void {
        console.log('ConcreteClass1 says: Implemented Operation2');
    }
}

/**
 * Usually, concrete classes override only a fraction of base class' operations.
 */
class ConcreteClass2 extends AbstractClass {
    protected requiredOperations1(): void {
        console.log('ConcreteClass2 says: Implemented Operation1');
    }

    protected requiredOperation2(): void {
        console.log('ConcreteClass2 says: Implemented Operation2');
    }

    protected hook1(): void {
        console.log('ConcreteClass2 says: Overridden Hook1');
    }
}

/**
 * The client code calls the template method to execute the algorithm. Client
 * code does not have to know the concrete class of an object it works with, as
 * long as it works with objects through the interface of their base class.
 */
function clientCode(abstractClass: AbstractClass) {
    // ...
    abstractClass.templateMethod();
    // ...
}

console.log('Same client code can work with different subclasses:');
clientCode(new ConcreteClass1());
console.log('');

console.log('Same client code can work with different subclasses:');
clientCode(new ConcreteClass2());
```

è¿˜ä»¥æµ‹è¯•ä¸¾ä¾‹ï¼Œæµ‹è¯•æ¡†æ¶å…¶å®æœ‰å¾ˆå¤šç§ã€‚å¦‚æœå†™æ³•éƒ½ä¸€æ ·ï¼Œä½†åº•å±‚æƒ³ä½¿ç”¨mochaæˆ–jestå®ç°ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ¨¡å¼å‘¢ï¼Ÿ

## å†…ç½®ç±»å‹å·¥å…·

ç®€å•ä¸¾å‡ ä¸ªç±»å‹å·¥å…·çš„ä¾‹å­ï¼š

å¢åŠ å­—æ®µ

```tsx
type X = {
  a: number;
  b: number;
};

type Y = X & {
  c: number;
};

const x: X = { a: 1, b: 2 };
const y: Y = { a: 1, b: 2, c: 3 };
```

åˆå¹¶

```tsx
type X = {
  a: number;
  b: number;
};

type Y = {
  c: number;
};

type Z = X & Y;

const x: X = { a: 1, b: 2 };
const y: Y = { c: 3 };
const z: Z = { a: 1, b: 2, c: 3 };
```

å®é™…ä¸Šä¸1ç­‰ä»·ï¼Œå› ä¸º1ä¸­çš„`{ c: number; }`Â ç­‰ä»·äºå°±åœ°å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ç±»å‹ã€‚

é€‰å–

```
type X = {
  a: number;
  b: number;
  c: number;
  d: number;
};

type Y = Pick<X, "b" | "c">;

const y: Y = { b: 1, c: 3 };
```

åˆ é™¤

```tsx
type X = {
  a: number;
  b: number;
  c: number;
};

type Y = Omit<X, "b">;

const y: Y = { a: 1, c: 3 };
```

ä»¥ä¸Šéƒ½æ˜¯ååˆ†åŸºç¡€çš„ç”¨æ³•ï¼Œä¸æ¶‰åŠåˆ°ä»»ä½•å¤æ‚çš„ç±»å‹ä½“æ“ï¼Œä½†é™¤äº†1ä¹‹å¤–æ²¡æœ‰ä¸€ä¸ªæ˜¯èƒ½è½»æ˜“åœ¨ Java ä¸­å®ç°çš„ï¼Œå¿…é¡»é€šè¿‡åå°„ä¹‹ç±»çš„æ‰‹æ®µã€‚å¯¹äºæ›´å¤æ‚çš„ç±»å‹çº¦æŸï¼ŒJava åˆ™æ ¹æœ¬æ— èƒ½ä¸ºåŠ›äº†ã€‚

# æ·±å…¥å­¦ä¹ æ–¹æ³•

## ç±»å‹å­¦ä¹ 

é¦–å…ˆé˜…è¯»[æ–‡æ¡£](https://www.typescriptlang.org/docs/)ï¼Œé‡Œé¢çš„å†…å®¹éå¸¸ä¸°å¯Œï¼Œå¯è¯»æ€§è¿˜æ˜¯éå¸¸ä¸é”™çš„ã€‚

å…¶æ¬¡ï¼Œçœ‹https://github.com/gikey/tool-typesï¼Œè™½ç„¶å®ƒæ²¡æœ‰starï¼Œä½†æ›´å®¹æ˜“ç†è§£ã€‚

```tsx
/**
 * Intersect
 * @desc è·å–ä¸¤ä¸ªç±»å‹ä¸­å±æ€§çš„äº¤é›†
 * @example
 *   type A = { name: string; age: number };
 *   type B = { name: string; address: string; gender: number; }
 *   // Expect: {name: string}
 *   Intersect<A, B>;
 */
export type Intersect<T, U> = Pick<T, Extract<keyof T, keyof U>>;

/**
 * Except
 * @desc è·å– A - B å·®é›†
 * @example
 *   type A = { name: string; age: number };
 *   type B = { name: string; address: string; gender: number; }
 *   // Expect: { age: number; }
 *   Except<A, B>;
 */
export type Except<T, U> = Pick<T, Exclude<keyof T, keyof U>>;

export type UnionOmit<T, U> = T & Omit<T, keyof U>;

export type TupleUnion<T> = T extends Array<infer U> ? U : never;
```

æŒæ¡äº†è¿™äº›å†…å®¹ä¹‹åï¼ŒåŸºæœ¬ç±»å‹å°±è¿‡å…³äº†ã€‚

ç„¶åçœ‹https://github.com/sindresorhus/type-festï¼Œæ¯”å¦‚å®ƒçš„basic

```tsx
export type Class<T, Arguments extends unknown[] = any[]> = {
	prototype: T;
	new(...arguments_: Arguments): T;
};

export type Constructor<T, Arguments extends unknown[] = any[]> = new(...arguments_: Arguments) => T;

export interface AbstractClass<T, Arguments extends unknown[] = any[]> extends AbstractConstructor<T, Arguments> {
	prototype: T;
}

export type AbstractConstructor<T, Arguments extends unknown[] = any[]> = abstract new(...arguments_: Arguments) => T;

export type JsonObject = {[Key in string]: JsonValue} & {[Key in string]?: JsonValue | undefined};

export type JsonArray = JsonValue[] | readonly JsonValue[];

export type JsonPrimitive = string | number | boolean | null;

export type JsonValue = JsonPrimitive | JsonObject | JsonArray;
```

å†å»çœ‹å…¶ä»–çš„å°±ç®€å•å¤šäº†ï¼Œæ¯”å¦‚jsonifyã€‚

```tsx
export type Jsonify<T> = IsAny<T> extends true
	? any
	: T extends PositiveInfinity | NegativeInfinity
		? null
		: T extends JsonPrimitive
			? T
			: // Instanced primitives are objects
			T extends Number
				? number
				: T extends String
					? string
					: T extends Boolean
						? boolean
						: T extends Map<any, any> | Set<any>
							? EmptyObject
							: T extends TypedArray
								? Record<string, number>
								: T extends NotJsonable
									? never // Non-JSONable type union was found not empty
									: // Any object with toJSON is special case
									T extends {toJSON(): infer J}
										? (() => J) extends () => JsonValue // Is J assignable to JsonValue?
											? J // Then T is Jsonable and its Jsonable value is J
											: Jsonify<J> // Maybe if we look a level deeper we'll find a JsonValue
										: T extends []
											? []
											: T extends unknown[]
												? JsonifyList<T>
												: T extends readonly unknown[]
													? JsonifyList<WritableDeep<T>>
													: T extends object
														? JsonifyObject<UndefinedToOptional<T>> // JsonifyObject recursive call for its children
														: never; // Otherwise any other non-object is removed
```

## type-challenges

[https://github.com/type-challenges/type-challenges](https://github.com/type-challenges/type-challenges)

å®‰è£…æ’ä»¶åï¼Œä¸ç”¨å» `github` ä¹Ÿå¯ä»¥ç›´æ¥åˆ·é¢˜ã€‚æ¥ç€ç‚¹å‡»ä¸‹å›¾ä¸­çš„ **Take the Challenge**ï¼Œç¬¬ä¸€æ¬¡ï¼Œä¼šè¦æ±‚ä½ é…ç½®ä»£ç å­˜æ”¾çš„è·¯å¾„ï¼Œé…ç½®å®Œæˆåä¼šè‡ªåŠ¨åˆ›å»ºç›¸åº”çš„æ–‡ä»¶ï¼Œæ¥ç€å¯å¼€å§‹åˆ·é¢˜å•¦ã€‚*å¦‚æœä¸å¤ªä¼šå¯ä»¥ç‚¹å‡»ä¸‹å›¾ä¸­çš„ **Check out Solutions**ï¼Œä¼šæ‰“å¼€å¤§å®¶åˆ†äº«çš„ç›¸åº”é¢˜ç›®çš„è§£ç­”ï¼Œå¯ä»¥å‚è€ƒå‚è€ƒã€‚*

![Untitled](img/Untitled%2015.png)

![Untitled](img/Untitled%2016.png)

ç­”æ¡ˆ

```
type MyPick<T, K extends keyof T> = {
  [key in K]: T[key]
}
```

ç­”æ¡ˆå’Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯åœ¨è¿™é‡Œå’Œè¯´æ˜ä¸€ä¸‹keyof åŠ in çš„æ¦‚å¿µåŠç”¨æ³•ï¼Œé¿å…åˆšæ¥è§¦çš„å°ä¼™ä¼´æŸ¥æ‰¾ã€‚

keyof: å–interfaceçš„é”®åä¿å­˜ä¸ºè”åˆç±»å‹

```tsx
interface userInfo {
  name: string
  age: number
}
type keyofValue = keyof userInfo
// keyofValue = "name" | "age"
```

in: å–è”åˆç±»å‹çš„å€¼ï¼Œä¸»è¦ç”¨äºæ•°ç»„å’Œå¯¹è±¡çš„æ„å»º

åˆ‡è®°ä¸è¦ç”¨äºinterface, å¦åˆ™ä¼šæŠ¥é”™

```tsx
type name = 'firstname' | 'lastname'
type TName = {
  [key in name]: string
}
// TName = { firstname: string, lastname: string }
```

ç”¨äºå®é™…å¼€å‘ï¼Œä¸¾ä¸ªä¾‹å­ï¼š

```tsx
function getValue(o:object, key: string){
  return o[key]
}
const obj1 = { name: 'å¼ ä¸‰', age: 18 }
const values = getValue(obj1, 'name')
```

è¿™æ ·å†™ä¸§å¤±äº†tsçš„ä¼˜åŠ¿ï¼š

1. æ— æ³•ç¡®å®šè¿”å›å€¼ç±»å‹
2. æ— æ³•å¯¹keyè¿›è¡Œçº¦æŸ

```tsx
function getValue<T extends Object,K extends keyof T>(o: T,key: K): T[K] {
  return o[key]
}
const obj1 = { name: 'å¼ ä¸‰'ï¼Œ age: 18}
const values = getValue(obj1, 'name')
// å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯obj1ä¸­çš„å‚æ•°å°±ä¼šæŠ¥é”™
```

## chatgpt

```bash
æˆ‘å¸Œæœ›ä½ å……å½“ TypeScript æ§åˆ¶å°ã€‚æˆ‘å°†é”®å…¥å‘½ä»¤ï¼Œæ‚¨å°†å›å¤ TypeScript ç±»å‹å®šä¹‰çš„å†…å®¹ã€‚æˆ‘å¸Œæœ›æ‚¨åªåœ¨ä¸€ä¸ªå”¯ä¸€çš„ä»£ç å—å†…å›å¤ç»ˆç«¯è¾“å‡ºï¼Œè€Œä¸æ˜¯å…¶ä»–ä»»ä½•å†…å®¹ã€‚ä¸è¦å†™è§£é‡Šã€‚é™¤éæˆ‘æŒ‡ç¤ºæ‚¨è¿™æ ·åšã€‚
æˆ‘çš„ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œå°†onå­—æ®µä¸­çš„æ¯ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªæ–°çš„å­—æ®µä¸Šï¼Œè¯¥å­—æ®µçš„åç§°æ˜¯åœ¨äº‹ä»¶åç§°å‰æ·»åŠ onå¹¶å°†å…¶è½¬æ¢ä¸ºé©¼å³°å‘½åæ³•ã€‚
```

ç»“æœ

```bash
type EventHandlers<T> = {
  [K in keyof T as `on${Capitalize<string & K>}`]: (event: T[K]) => void;
};
```

ä½¿ç”¨Chromeæ’ä»¶Siderï¼Œå‚è§[https://sider.ai/](https://sider.ai/)ï¼ŒåŸå› æ˜¯chatgptç”³è¯·è¾ƒä¸ºéº»çƒ¦ï¼Œå¦‚æœè‡ªå·±æƒ³ç”³è¯·chatgptï¼Œå¯ä»¥å‚è€ƒhttps://github.com/justjavac/chatgptã€‚

ä¸Šé¢çš„æç¤ºè¯ï¼Œé”®å…¥åˆ°Sideré‡Œï¼Œç•Œé¢å¦‚ä¸‹ã€‚

![Untitled](img/Untitled%2017.png)

# å°ç»“

æœ¬ç« ç®€è¦ä»‹ç»TypeScriptæ˜¯ä»€ä¹ˆï¼Œå­¦ä¹ è¦ç‚¹ï¼Œä»¥åŠå¦‚ä½•æ·±å…¥å­¦ä¹ ã€‚è¿™é‡Œæˆ‘ä»¥ä¸ºå’Œå…¶ä»–è¯¾ç¨‹ä¸ä¸€æ ·çš„æ˜¯å…³äºå­¦ä¹ è¦ç‚¹éƒ¨åˆ†ã€‚ç›®å‰å‰ç«¯å¯¹tsç”¨æ³•ï¼Œè¿˜æ˜¯ä»¥é¢å‘è¿‡ç¨‹ä¸ºä¸»ï¼Œé¢å‘å¯¹è±¡ä¸åˆ†è®²çš„ç›¸å¯¹è¾ƒå°‘ã€‚å…¶æ¬¡å…³äºç±»å‹å­¦ä¹ ï¼Œä¹Ÿç®—æœ‰ä¸€äº›å¿ƒå¾—ï¼Œå¸Œæœ›èƒ½å¤Ÿè®©å¤§å®¶æŒæ¡å­¦ä¹ æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§éƒ½èƒ½æ•™ä¼šã€‚

åœ¨ä¸‹ä¸€ç« ä¼šé’ˆå¯¹tsè¯­æ³•å’ŒNode.jsç›¸å…³å†…å®¹è¿›è¡Œè¯¦ç»†è®²è§£ã€‚

å…¶ä»–å¯å‚è€ƒèµ„æº

- [TypeScript å®˜ç½‘](https://link.zhihu.com/?target=https%3A//www.typescriptlang.org/)
- [https://juejin.cn/book/7086408430491172901](https://juejin.cn/book/7086408430491172901) (TypeScript å…¨é¢è¿›é˜¶æŒ‡å—)ï¼Œæ¯”è¾ƒå¥½çš„å…¥é—¨è¯¾ç¨‹
- [å¯èƒ½æ˜¯ä¸­å›½æœ€å¥½çš„ TypeScript å…¥é—¨åˆ°è¿›é˜¶ç³»ç»Ÿæ•™ç¨‹](https://link.zhihu.com/?target=https%3A//ts.yayujs.com/)
- [TypeScript ä½¿ç”¨æŒ‡å—æ‰‹å†Œ](https://link.zhihu.com/?target=http%3A//www.patrickzhong.com/TypeScript/PREFACE.html)
- [æ·±å…¥ç†è§£ TypeScript](https://link.zhihu.com/?target=https%3A//jkchao.github.io/typescript-book-chinese/)
- [https://www.typescripttutorial.net/](https://www.typescripttutorial.net/)
- [https://intellisoft.io/typescript-vs-javascript-which-programming-language-fits-your-project/](https://intellisoft.io/typescript-vs-javascript-which-programming-language-fits-your-project/)
- [https://wangdoc.com/typescript/](https://wangdoc.com/typescript/generics#%E5%87%BD%E6%95%B0%E7%9A%84%E6%B3%9B%E5%9E%8B%E5%86%99%E6%B3%95)
- [https://typescript.tv/](https://typescript.tv/)
- [https://effectivetypescript.com/](https://effectivetypescript.com/) [ä¸‹è½½åœ°å€](https://books-library.net/files/books-library.net-10121732Pl7G6.pdf)ã€‚